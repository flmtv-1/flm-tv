<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FLM TV Player</title>
    
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ═══════════════════════════════════════════════════════════════ */
        /* EXACT CSS FROM YOUR INDEX.HTML                                 */
        /* ═══════════════════════════════════════════════════════════════ */
        :root {
            --primary: #ffd700; --secondary: #22c55e; --accent: #ffd700;
            --bg: #0a0f1a; --bg-light: #1a1f2e; --text: #ffffff;
        }

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Inter', sans-serif; }
        .player-layout { display: flex; width: 100vw; height: 100vh; position: relative; }
        .video-holder { flex-grow: 1; position: relative; background: #000; }

        /* SIDE PANELS (Direct copy of your logic) */
        .side-panel {
            position: fixed; top: 0; right: -450px; width: 450px; height: 100%;
            background: var(--bg-light); border-left: 3px solid var(--primary);
            transition: right 0.3s ease; z-index: 10001; display: flex; flex-direction: column;
        }
        .side-panel.active { right: 0; }
        @media (max-width: 768px) { .side-panel { width: 100%; right: -100%; } }

        .panel-header {
            padding: 1.25rem; border-bottom: 2px solid var(--secondary);
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.2);
        }

        /* FLOATING BUTTONS (Exactly like your index page) */
        .floating-buttons {
            position: fixed; bottom: 100px; right: 2rem;
            display: flex; flex-direction: column; gap: 1rem; z-index: 10000;
        }
        .floating-btn {
            width: 60px; height: 60px; border-radius: 50%; border: 3px solid var(--neon-green);
            background: rgba(15, 23, 42, 0.9); color: var(--neon-green);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 1.5rem; transition: all 0.3s ease;
        }
        .floating-btn:hover { transform: scale(1.1); background: var(--neon-green); color: white; }
        .floating-btn img { width: 40px; height: 40px; border-radius: 50%; }

        /* VIDEO.JS CUSTOMIZATION */
        .vjs-control-bar { background: linear-gradient(transparent, rgba(0,0,0,0.9)) !important; height: 4.5em !important; }
        .vjs-big-play-button { background-color: rgba(34, 197, 94, 0.5) !important; border-color: var(--primary) !important; }
    </style>
</head>
<body>

<div class="player-layout">
    <div class="video-holder">
        <button onclick="window.history.back()" style="position:absolute; top:20px; left:20px; z-index:10002; background:rgba(0,0,0,0.6); border:2px solid var(--primary); color:white; padding:10px 15px; border-radius:8px; cursor:pointer;">
            <i class="fas fa-arrow-left"></i> BACK
        </button>

        <video id="flm-pro-player" class="video-js vjs-big-play-centered" controls preload="auto" playsinline></video>

        <div class="floating-buttons">
            <button class="floating-btn" onclick="openPanel('chatPanel')">
                <i class="fas fa-comments"></i>
            </button>
            <button class="floating-btn" onclick="openPanel('aiPanel')">
                <img src="assets/images/z-ai-avatar2.png">
            </button>
        </div>
    </div>

    <div id="chatPanel" class="side-panel">
        <div class="panel-header">
            <h2 style="color:var(--primary); margin:0;">GLOBAL CHAT</h2>
            <button onclick="closePanel('chatPanel')" style="background:none; border:none; color:white; font-size:1.8rem;">&times;</button>
        </div>
        <div id="chatMessages" style="flex-grow:1; overflow-y:auto; padding:15px;"></div>
        </div>

    <div id="aiPanel" class="side-panel">
        <div class="panel-header">
            <h2 style="color:var(--secondary); margin:0;">ZAINA AI</h2>
            <button onclick="closePanel('aiPanel')" style="background:none; border:none; color:white; font-size:1.8rem;">&times;</button>
        </div>
        <div id="aiChatMessages" style="flex-grow:1; overflow-y:auto; padding:15px;"></div>
        </div>
</div>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const itemId = urlParams.get('id');
    const SERVER = "https://flmtv26.duckdns.org:8920";
    const API_KEY = "5423f03b4131464490333d964f4f7830";

    // Setup Video.js with FULL Controls
    const player = videojs('flm-pro-player', {
        autoplay: true,
        muted: false,
        playbackRates: [0.5, 1, 1.5, 2],
        controlBar: {
            children: [
                'playToggle', 'volumePanel', 'currentTimeDisplay', 
                'progressControl', 'durationDisplay', 'chaptersButton', 
                'subsCapsButton', 'fullscreenToggle'
            ]
        }
    });

    if (itemId) {
        player.src({
            src: `${SERVER}/Videos/${itemId}/stream?static=true&api_key=${API_KEY}`,
            type: 'video/mp4'
        });
    }

    // PANEL LOGIC (Directly from your index.html script)
    function openPanel(panelId) {
        document.querySelectorAll('.side-panel').forEach(p => p.classList.remove('active'));
        const panel = document.getElementById(panelId);
        if (panel) panel.classList.add('active');
        document.body.classList.add('panel-active');
    }

    function closePanel(panelId) {
        const panel = document.getElementById(panelId);
        if (panel) panel.classList.remove('active');
        document.body.classList.remove('panel-active');
    }
</script>

<script src="flm-auth-system.js"></script>

</body>
</html>