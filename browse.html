<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLM TV - Part 2: Visual Categories</title>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <link rel="icon" type="image/png" href="assets/logos/flm-logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  VARIABLES - Filipino Flag Colors                               */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        :root {
            --primary: #0038a8;        /* Blue */
            --secondary: #ce1126;      /* Red */
            --accent: #fcd116;         /* Gold/Yellow */
            --neon-green: #22c55e;     /* Neon Green */
            --bg: #0f172a;
            --bg-light: #1e293b;
            --bg-card: #1e293b;
            --text: #e2e8f0;
            --text-secondary: #94a3b8;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  RESET & BASE                                                   */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            transition: padding-right 0.3s ease;
        }

        /* Push content left when panel is open */
        body.panel-active {
            padding-right: 450px;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  HEADER                                                         */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .header {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--primary);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 2rem;
        }
        
        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .logo-container img {
            height: 50px;
            width: auto;
            border-radius: 8px;
        }
        
        .logo-text {
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header-nav {
            display: flex;
            gap: 2rem;
            list-style: none;
        }
        
        .header-nav a {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: color 0.3s ease;
            position: relative;
        }
        
        .header-nav a:hover {
            color: var(--neon-green);
        }
        
        .header-nav a.active {
            color: var(--accent);
        }
        
        .header-nav a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--neon-green);
        }
        
        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .btn-icon {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--neon-green);
            color: var(--neon-green);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }
        
        .btn-icon:hover {
            background: var(--neon-green);
            color: white;
            transform: scale(1.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(252, 209, 22, 0.3);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  HERO BANNER                                                    */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .hero-banner {
            height: 70vh;
            position: relative;
            overflow: hidden;
        }
        
        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            background-size: cover;
            background-position: center;
        }
        
        .hero-slide.active {
            opacity: 1;
        }
        
        .hero-slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(15, 23, 42, 0.3), rgba(15, 23, 42, 0.9));
        }
        
        .hero-content {
            position: absolute;
            bottom: 10%;
            left: 5%;
            max-width: 600px;
            z-index: 2;
            color: white;
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 1rem;
            color: var(--accent);
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
        }
        
        .hero-description {
            font-size: 1.25rem;
            color: white;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8);
            line-height: 1.6;
        }
        
        .hero-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-hero-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-hero-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(206, 17, 38, 0.4);
        }
        
        .btn-hero-secondary {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid var(--neon-green);
        }
        
        .btn-hero-secondary:hover {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--neon-green);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  CATEGORY NAVIGATION                                            */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .category-nav-section {
            background: var(--bg-light);
            padding: 2rem;
            border-bottom: 2px solid var(--primary);
        }
        
        .category-nav-container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .category-nav-title {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 1.5rem;
        }
        
        .category-nav-wrapper {
            position: relative;
        }
        
        .category-nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(15, 23, 42, 0.9);
            border: 3px solid var(--neon-green);
            color: var(--neon-green);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .category-nav-arrow:hover {
            background: var(--neon-green);
            color: white;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 0 20px var(--neon-green);
        }
        
        .category-nav-arrow.left {
            left: -25px;
        }
        
        .category-nav-arrow.right {
            right: -25px;
        }
        
        .category-nav-scroll {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0.5rem 0 1rem 0;
            scroll-behavior: smooth;
            scrollbar-width: none;
        }
        
        .category-nav-scroll::-webkit-scrollbar {
            display: none;
        }
        
        .category-nav-item {
            flex: 0 0 250px;
            height: 140px;
            position: relative;
            cursor: pointer;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .category-nav-item:hover {
            transform: scale(1.05);
            border-color: var(--neon-green);
            box-shadow: 0 8px 24px rgba(34, 197, 94, 0.3);
        }
        
        .category-nav-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .category-nav-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            display: flex;
            align-items: flex-end;
            padding: 1rem;
        }
        
        .category-nav-name {
            font-size: 1.1rem;
            font-weight: 800;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  CONTENT SECTIONS                                               */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .content-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .category-section {
            margin-bottom: 3rem;
        }
        
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .category-title {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--accent);
        }
        
        .view-all-btn {
            color: var(--neon-green);
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .view-all-btn:hover {
            gap: 0.75rem;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  CONTENT CAROUSEL                                               */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .content-carousel {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0.5rem 0 1rem 0;
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: var(--neon-green) var(--bg-light);
        }
        
        .content-carousel::-webkit-scrollbar {
            height: 8px;
        }
        
        .content-carousel::-webkit-scrollbar-track {
            background: var(--bg-light);
            border-radius: 4px;
        }
        
        .content-carousel::-webkit-scrollbar-thumb {
            background: var(--neon-green);
            border-radius: 4px;
        }
        
        .content-card {
            flex: 0 0 200px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .content-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.6),
                        0 0 60px rgba(34, 197, 94, 0.4),
                        0 8px 25px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--neon-green);
        }
        
        .content-card-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 8px;
            background: var(--bg-card);
        }
        
        .content-card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.85) 70%, transparent 100%);
            padding: 1rem;
            border-radius: 0 0 8px 8px;
        }
        
        .content-card-title {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        .content-card-info {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  LOADING STATE                                                  */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            gap: 1rem;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--bg-light);
            border-top-color: var(--neon-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        /* Floating Chat/AI buttons that appear ONLY during video playback */
        /* Floating Chat/AI buttons for main page */
        .floating-buttons {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 10001;
            transition: right 0.3s ease;
        }
        
        body.panel-active .floating-buttons {
            right: 470px;
        }
        
        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .floating-btn:hover {
            transform: scale(1.1);
        }
        
        .floating-btn-chat {
            background: var(--neon-green);
            color: white;
        }
        
        .floating-btn-ai {
            background: linear-gradient(135deg, var(--neon-green) 0%, var(--accent) 100%);
            padding: 0;
            overflow: hidden;
            border: 3px solid var(--neon-green);
        }
        
        .floating-btn-ai img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        /* Hide floating buttons when viewer is active */
        .jellyfin-viewer.active ~ .floating-buttons {
            display: none;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  MODALS                                                         */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            border: 2px solid var(--primary);
            animation: slideUp 0.3s ease;
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.75rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: var(--neon-green);
            color: white;
            transform: rotate(90deg);
        }
        
        .modal-body {
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg);
            border: 2px solid var(--primary);
            border-radius: 8px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--neon-green);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }
        
        .modal-footer {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .btn-modal {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .btn-modal-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
        }
        
        .btn-modal-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(252, 209, 22, 0.3);
        }
        
        .btn-modal-secondary {
            background: var(--bg-light);
            color: var(--text);
            border: 2px solid var(--neon-green);
        }
        
        .btn-modal-secondary:hover {
            background: rgba(34, 197, 94, 0.1);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  SIDE PANELS (Chat & AI)                                        */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .side-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 450px;
            height: 100vh;
            background: var(--bg-card);
            border-left: 3px solid var(--primary);
            z-index: 10500;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .side-panel.active {
            right: 0;
        }
        
        .panel-header {
            padding: 1.5rem;
            border-bottom: 2px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--bg-card) 100%);
        }
        
        .panel-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent);
        }
        
        .panel-close {
            background: none;
            border: none;
            color: var(--neon-green);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .panel-close:hover {
            background: var(--neon-green);
            color: white;
            transform: rotate(90deg);
        }
        
        .panel-body {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  FLOATING BUTTONS (Chat & AI)                                   */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  JELLYFIN VIEWER FRAME                                         */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .jellyfin-viewer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000;
            z-index: 9999;
            display: none;
            flex-direction: column;
            transition: right 0.3s ease;
        }
        
        .jellyfin-viewer.active {
            display: flex;
        }
        
        /* Push viewer left when panel opens */
        body.panel-active .jellyfin-viewer {
            right: 450px;
        }
        
        .viewer-header {
            background: rgba(15, 23, 42, 0.98);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--primary);
            z-index: 10000;
            position: sticky;
            top: 0;
            pointer-events: auto;
            gap: 2rem;
        }
        
        .viewer-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-shrink: 0;
        }
        
        .viewer-logo img {
            height: 40px;
        }
        
        .viewer-logo span {
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .viewer-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
            justify-content: flex-end;
        }
        
        .btn-icon {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--neon-green);
            color: white;
            padding: 0.65rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .btn-icon:hover {
            background: var(--neon-green);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
        }
        
        .viewer-chat-btn,
        .viewer-ai-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--accent);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .viewer-chat-btn:hover,
        .viewer-ai-btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(252, 209, 22, 0.4);
        }
        
        .viewer-back {
            background: var(--neon-green);
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .viewer-back:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
        }
        
        .viewer-close {
            background: var(--secondary);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .viewer-close:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(206, 17, 38, 0.4);
        }
        
        #jellyfinFrame {
            flex: 1;
            width: 100%;
            height: 100%;
            border: none;
            background: #000;
        }
            transform: translateY(-50%);
            background: linear-gradient(135deg, var(--neon-green) 0%, var(--accent) 100%);
            color: var(--bg);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
        }
        
        .floating-btn-ai:hover::after {
            opacity: 1;
            right: 75px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  LIVE TV MODAL                                                  */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .live-tv-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .live-tv-modal.active {
            display: flex;
        }
        
        .live-tv-content {
            width: 95%;
            max-width: 1000px;
            position: relative;
            max-height: 90vh;
        }
        
        .live-tv-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        
        .live-tv-title {
            color: var(--secondary);
            font-size: 1.5rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .live-tv-title {
                font-size: 1.2rem;
            }
        }
        
        .live-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: var(--secondary);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .close-live-tv {
            background: var(--secondary);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        @media (max-width: 768px) {
            .close-live-tv {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
        }
        
        .close-live-tv:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(206, 17, 38, 0.4);
        }
        
        .live-tv-player {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            background: #000;
            border-radius: 12px;
            border: 3px solid var(--accent);
        }
        
        .live-tv-player iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  LIVE CHANNEL 26.5 CARD                                         */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .live-channel-card {
            flex: 0 0 350px;
            height: 200px;
            position: relative;
            cursor: pointer;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 3px solid var(--secondary);
            background: #000;
            box-shadow: 0 8px 24px rgba(206, 17, 38, 0.4);
        }
        
        .live-channel-card:hover {
            transform: scale(1.05);
            border-color: var(--neon-green);
            box-shadow: 0 12px 32px rgba(34, 197, 94, 0.5);
        }
        
        .live-preview-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .live-channel-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 65px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0.75rem 1.25rem;
            background: linear-gradient(135deg, rgba(206, 17, 38, 0.85) 0%, rgba(139, 0, 0, 0.85) 100%);
            backdrop-filter: blur(5px);
        }
        
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            font-weight: 800;
            margin-bottom: 0.35rem;
            color: white;
        }
        
        .live-dot {
            width: 8px;
            height: 8px;
            background: #ff0000;
            border-radius: 50%;
            animation: livePulse 1.5s infinite;
            box-shadow: 0 0 10px #ff0000;
        }
        
        @keyframes livePulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }
        
        .live-channel-name {
            font-size: 1.1rem;
            font-weight: 900;
            color: white;
            margin-bottom: 0rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            line-height: 1.2;
            letter-spacing: 0.5px;
        }
        
        .live-channel-description {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.85);
            display: none;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /*  LIVE VIDEO MODAL                                               */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .video-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            transition: padding-right 0.3s ease;
        }
        
        .video-modal.active {
            display: flex;
        }
        
        /* Push video left when panel opens */
        body.panel-active .video-modal {
            padding-right: 450px;
        }
        
        .video-container {
            width: 90%;
            max-width: 1200px;
            position: relative;
        }
        
        .video-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .video-title {
            color: var(--secondary);
            font-size: 2rem;
            font-weight: 900;
        }
        
        .close-video {
            background: var(--secondary);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .close-video:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(206, 17, 38, 0.4);
        }
        
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: #000;
            border-radius: 12px;
            border: 3px solid var(--accent);
        }
        
        .video-wrapper video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
    </style>
</head>
<body>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  HEADER                                                         -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <header class="header">
        <div class="header-content">
            <div class="logo-container">
                <img src="assets/logos/flm-logo.png" alt="FLM TV Logo">
                <h1 class="logo-text">FLM TV</h1>
            </div>
            
            <nav>
                <ul class="header-nav">
                    <li><a href="#" class="active">Home</a></li>
                    <li><a href="#">Movies</a></li>
                    <li><a href="#">TV Shows</a></li>
                    <li><a href="#" onclick="openLiveTV(); return false;">ğŸ”´ Live TV</a></li>
                    <li><a href="#">Categories</a></li>
                </ul>
            </nav>
            
            <div class="nav-actions">
                <!-- Back to Gate Button -->
                <button class="btn-icon" onclick="window.location.href='index.html'" title="Back to Home" style="border-color: var(--accent); color: var(--accent);">
                    <i class="fas fa-home"></i>
                </button>
                
                <button class="btn-icon" onclick="openPanel('chatPanel')" title="Chat">
                    <i class="fas fa-comments"></i>
                </button>
                
                <button class="btn-icon" onclick="openPanel('aiPanel')" title="Zaina AI">
                    <i class="fas fa-robot"></i>
                </button>
                
                <button class="btn-icon" title="Notifications">
                    <i class="fas fa-bell"></i>
                </button>
                
                <button class="btn-icon" id="parentLockBtn" title="Parental Controls">
                    <i class="fas fa-lock"></i>
                </button>
                
                <button class="btn-primary" id="signInBtn">
                    <i class="fas fa-user"></i> Sign In / Sign Up
                </button>
            </div>
        </div>
    </header>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  HERO BANNER                                                    -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <section class="hero-banner" id="heroBanner">
        <!-- Slides will be dynamically inserted here -->
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  CATEGORY NAVIGATION                                            -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <section class="category-nav-section">
        <div class="category-nav-container">
            <h2 class="category-nav-title">Browse Categories</h2>
            <div class="category-nav-wrapper">
                <button class="category-nav-arrow left" onclick="scrollCategoryNav(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="category-nav-scroll" id="categoryNavScroll">
                    <!-- LIVE CHANNEL 26.5 - vMix Stream -->
                    <div class="live-channel-card" onclick="openLiveTV()">
                        <iframe 
                            class="live-preview-video" 
                            src="http://50.158.216.170:8088/" 
                            frameborder="0" 
                            scrolling="no"
                            style="pointer-events: none;"
                            allow="autoplay"
                        ></iframe>
                        <div class="live-channel-content">
                            <div class="live-indicator">
                                <div class="live-dot"></div>
                                <span>ğŸ”´ LIVE</span>
                            </div>
                            <div class="live-channel-name">FLM Channel 26.5 Las Vegas</div>
                        </div>
                    </div>
                    <!-- Category cards will be dynamically added here -->
                </div>
                <button class="category-nav-arrow right" onclick="scrollCategoryNav(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  CONTENT SECTIONS                                               -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <div class="content-container" id="contentContainer">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <div class="loading-text">Loading your content...</div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  SIGN IN MODAL                                                  -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <div class="modal-overlay" id="signInModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title" style="color: white;">Log In</h3>
                <button class="modal-close" onclick="closeModal('signInModal')" style="background: none; border: none; color: white; font-size: 2rem; cursor: pointer; line-height: 1;">
                    âœ•
                </button>
            </div>
            <div class="modal-body" style="padding: 2rem;">
                <div class="form-group" style="margin-bottom: 1.5rem;">
                    <input type="email" class="form-input" placeholder="Email Address" style="width: 100%; padding: 1rem; border-radius: 0.25rem; border: 1px solid #444; background: white; color: #333; font-size: 1rem;">
                </div>
                <div class="form-group" style="margin-bottom: 1rem; position: relative;">
                    <input type="password" id="signInPassword" class="form-input" placeholder="Password" style="width: 100%; padding: 1rem; border-radius: 0.25rem; border: 1px solid #444; background: #3a3a3a; color: white; font-size: 1rem;">
                    <button onclick="togglePassword('signInPassword')" style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); background: none; border: none; color: #999; cursor: pointer; font-size: 1.2rem;">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <a href="#" style="color: #999; text-decoration: none; font-size: 0.9rem;">Forgot Password?</a>
                </div>
                <button class="btn-modal btn-modal-primary" style="width: 100%; padding: 1rem; background: var(--secondary); color: white; border: none; border-radius: 0.25rem; font-size: 1rem; font-weight: 600; cursor: pointer; margin-bottom: 1rem;">
                    Log In
                </button>
                <div style="text-align: center; margin-bottom: 1.5rem; color: #999;">
                    Not a member? <a href="#" style="color: var(--secondary); text-decoration: none; font-weight: 600;">Sign Up</a>
                </div>
                <button style="width: 100%; padding: 1rem; background: #666; color: white; border: none; border-radius: 0.25rem; font-size: 1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                    ğŸ‘‘ Try Paid Membership
                </button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  PARENT LOCK MODAL                                              -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <div class="modal-overlay" id="parentLockModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title" style="color: var(--secondary); font-weight: 700;">Set Parent Code</h3>
                <button class="modal-close" onclick="closeModal('parentLockModal')" style="background: none; border: none; color: white; font-size: 2rem; cursor: pointer; line-height: 1;">
                    âœ•
                </button>
            </div>
            <div class="modal-body" style="padding: 2rem;">
                <p style="color: var(--accent); text-align: center; margin-bottom: 2rem; font-size: 1.1rem;">
                    Please set a 4-digit parent code and a security question.
                </p>
                <div class="form-group" style="margin-bottom: 1.5rem;">
                    <input type="password" id="parentCode1" class="form-input" placeholder="Enter new 4-digit code" maxlength="4" style="width: 100%; padding: 1rem; border-radius: 0.25rem; border: 1px solid #444; background: #3a3a3a; color: white; font-size: 1rem;">
                </div>
                <div class="form-group" style="margin-bottom: 1.5rem;">
                    <input type="password" id="parentCode2" class="form-input" placeholder="Confirm 4-digit code" maxlength="4" style="width: 100%; padding: 1rem; border-radius: 0.25rem; border: 1px solid #444; background: #3a3a3a; color: white; font-size: 1rem;">
                </div>
                <div class="form-group" style="margin-bottom: 1.5rem;">
                    <input type="text" id="securityQuestion" class="form-input" placeholder="Enter a security question (e.g., Mother's maiden name?)" style="width: 100%; padding: 1rem; border-radius: 0.25rem; border: 1px solid #444; background: #3a3a3a; color: white; font-size: 1rem;">
                </div>
                <div class="form-group" style="margin-bottom: 2rem;">
                    <input type="password" id="securityAnswer" class="form-input" placeholder="Enter the answer" style="width: 100%; padding: 1rem; border-radius: 0.25rem; border: 1px solid #444; background: #3a3a3a; color: white; font-size: 1rem;">
                </div>
                <button class="btn-modal btn-modal-primary" style="width: 100%; padding: 1rem; background: var(--secondary); color: white; border: none; border-radius: 0.25rem; font-size: 1rem; font-weight: 700; cursor: pointer; margin-bottom: 1rem;">
                    Set Code
                </button>
                <div style="text-align: center;">
                    <a href="#" onclick="closeModal('parentLockModal'); return false;" style="color: #999; text-decoration: none;">Cancel</a>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  CHAT PANEL                                                     -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <div class="side-panel" id="chatPanel">
        <div class="panel-header">
            <h3 class="panel-title"><i class="fas fa-comments"></i> Live Chat</h3>
            <button class="panel-close" onclick="closePanel('chatPanel')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chatMessages" style="flex-grow: 1; padding: 1rem; overflow-y: auto; background-color: #1a1a1a;">
            <div class="message received">
                <div class="message-bubble">Welcome to the chat!</div>
            </div>
            <div class="message sent">
                <div class="message-bubble">Hello there!</div>
            </div>
        </div>
        <div class="chat-input-area" style="background-color: #282828; padding: 1rem; border-top: 1px solid #333; display: flex; align-items: center; gap: 0.5rem; position: relative;">
            <textarea id="chatInput" class="chat-input" placeholder="Type your message..." style="flex-grow: 1; padding: 0.75rem; border-radius: 1.5rem; border: 1px solid #444; background-color: #333; color: white; outline: none; font-size: 1em; resize: none; min-height: 40px; max-height: 100px; overflow-y: auto; font-family: inherit;"></textarea>
            <button id="emojiBtn" class="chat-btn" style="background-color: var(--secondary); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.2em; flex-shrink: 0;">ğŸ˜€</button>
            <button id="sendBtn" class="chat-btn" style="background-color: var(--secondary); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.2em; flex-shrink: 0;">
                <i class="fas fa-paper-plane"></i>
            </button>
            <div id="emojiPicker" class="emoji-picker" style="position: absolute; bottom: calc(100% + 10px); left: 0; right: 0; background-color: #282828; border-radius: 8px; box-shadow: 0 -5px 15px rgba(0,0,0,0.4); padding: 1rem; display: none; flex-wrap: wrap; gap: 0.5rem; max-height: 200px; overflow-y: auto; z-index: 10;"></div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  ZAINA AI PANEL                                                 -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <div class="side-panel" id="aiPanel">
        <div class="panel-header">
            <h3 class="panel-title"><i class="fas fa-robot"></i> Zaina J AI</h3>
            <button class="panel-close" onclick="closePanel('aiPanel')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="panel-body" style="padding: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                <img src="assets/images/z-ai-avatar2.png" alt="Zaina AI" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid var(--accent);">
                <div>
                    <h4 style="color: var(--accent); font-weight: 700; margin-bottom: 0.25rem;">Zaina J AI</h4>
                    <p style="color: var(--text-secondary); font-size: 0.875rem;">Your Entertainment Assistant</p>
                </div>
            </div>
            
            <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; color: var(--text);">
                Search film info, trailers, actors...
            </h3>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 2rem;">
                <input type="text" id="aiSearchInput" placeholder="Search film..." 
                       style="flex: 1; padding: 0.75rem; border-radius: 0.5rem; background: #333; color: white; border: 1px solid #444; font-family: inherit;">
                <button id="aiSearchButton" 
                        style="background: var(--secondary); color: white; padding: 0.75rem 1.25rem; border: none; border-radius: 0.5rem; cursor: pointer; font-weight: 600;">
                    Search
                </button>
            </div>
            <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--neon-green);">
                AI Assistant
            </h3>
            <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1.25rem; line-height: 1.6;">
                Hello! I'm Zaina, your personal AI assistant. I can help you find information about movies, series, actors, and more. Just type your query above.
            </p>
            <p style="font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text);">
                Example queries:
            </p>
            <ul style="list-style: disc; list-style-position: inside; font-size: 0.875rem; color: var(--text-secondary); line-height: 1.8;">
                <li>"Tell me about the movie Inception."</li>
                <li>"Who is the director of Oppenheimer?"</li>
                <li>"Show me movies starring Tom Hanks."</li>
            </ul>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  FLOATING BUTTONS                                               -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <!-- Jellyfin Viewer Frame (FLM Branded) -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  LIVE VIDEO PLAYER MODAL                                        -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <div class="video-modal" id="videoModal">
        <div class="video-container">
            <div class="video-header">
                <h2 class="video-title">
                    <span class="live-dot"></span>
                    LIVE - Channel 26.5 Las Vegas
                </h2>
                <button class="close-video" onclick="closeLiveStream()">âœ• Close</button>
            </div>
            <div class="video-wrapper">
                <video id="liveVideo" controls autoplay muted playsinline
                       style="width: 100%; height: 100%; background: #000;"></video>
            </div>
            <div style="text-align: center; margin-top: 1rem;">
                <button onclick="closeLiveStream()" 
                        style="background: var(--neon-green); color: white; border: none; padding: 1rem 2rem; 
                               border-radius: 8px; font-size: 1.1rem; font-weight: 700; cursor: pointer; 
                               transition: all 0.3s ease;">
                    <i class="fas fa-arrow-left"></i> Back to Browse
                </button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  LIVE TV CHANNEL 26.5                                           -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <div class="live-tv-modal" id="liveTvModal">
        <div class="live-tv-content">
            <div class="live-tv-header">
                <h2 class="live-tv-title">
                    <span class="live-indicator"></span>
                    LIVE - Channel 26.5 Las Vegas
                </h2>
                <button class="close-live-tv" onclick="closeLiveTV()">âœ•</button>
            </div>
            <div class="live-tv-player">
                <!-- vMix Web Controller - Channel 26.5 -->
                <iframe 
                    id="liveStreamFrame"
                    src="http://50.158.216.170:8088/" 
                    frameborder="0" 
                    scrolling="no" 
                    allow="autoplay; encrypted-media; fullscreen"
                    allowfullscreen 
                    webkitallowfullscreen 
                    mozallowfullscreen 
                    oallowfullscreen 
                    msallowfullscreen>
                </iframe>
            </div>
        </div>
    </div>

    <div class="jellyfin-viewer" id="jellyfinViewer">
        <div class="viewer-header">
            <div class="viewer-logo">
                <img src="assets/logos/flm-logo.png" alt="FLM TV" onerror="this.style.display='none'">
                <span>FLM TV</span>
            </div>
            
            <button class="viewer-back" onclick="closeViewer()">
                <i class="fas fa-arrow-left"></i> Back to Browse
            </button>
            
            <div class="viewer-controls">
                <!-- Chat & AI Buttons -->
                <button class="btn-icon" onclick="openPanel('chatPanel')" title="Chat">
                    <i class="fas fa-comments"></i>
                </button>
                <button class="btn-icon" onclick="openPanel('aiPanel')" title="Zaina AI">
                    <i class="fas fa-robot"></i>
                </button>
                
                <!-- Close Button -->
                <button class="viewer-close" onclick="closeViewer()" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <iframe id="jellyfinFrame" src="" allow="autoplay; encrypted-media; fullscreen"></iframe>
        
        <!-- 7th Realm Portal - First Time Only -->
        <div id="realmPortal" style="position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(15,23,42,0.98),rgba(59,7,100,0.95),rgba(15,23,42,0.98));display:none;align-items:center;justify-content:center;z-index:999;backdrop-filter:blur(15px);">
            <div style="max-width:600px;padding:3rem;text-align:center;background:linear-gradient(135deg,rgba(0,56,168,0.9),rgba(139,92,246,0.8),rgba(0,56,168,0.9));border-radius:25px;border:3px solid #fcd116;box-shadow:0 0 60px rgba(252,209,22,0.4);">
                <div style="font-size:5rem;margin-bottom:1rem;">ğŸ›¸</div>
                <h2 style="color:#fcd116;font-size:2.5rem;margin-bottom:0.5rem;font-weight:900;text-transform:uppercase;">Portal Activating...</h2>
                <div style="font-size:1.8rem;background:linear-gradient(135deg,#22c55e,#fcd116,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800;margin-bottom:1.5rem;">You Are Now Entering<br>The 7th Realm of FLM</div>
                <p style="color:#e2e8f0;font-size:1.2rem;margin-bottom:1.5rem;"><strong style="color:#22c55e;">Out of This World</strong> entertainment awaits! ğŸŒâœ¨<br>Select <strong style="color:#fcd116;">"Public"</strong> to access the vast library.</p>
                <p style="color:#94a3b8;font-size:1rem;margin-bottom:2rem;font-style:italic;">ğŸŒŸ One-time portal sync - you'll be remembered! ğŸŒŸ</p>
                <button onclick="document.getElementById('realmPortal').style.display='none';localStorage.setItem('flm_portal_seen','1')" style="background:linear-gradient(135deg,#22c55e,#fcd116);color:white;border:none;padding:1.2rem 3rem;font-size:1.3rem;font-weight:700;border-radius:50px;cursor:pointer;">ğŸš€ Enter The 7th Realm ğŸš€</button>
            </div>
        </div>
    </div>
    
    <!-- Floating Chat/AI buttons for main page -->
    <div class="floating-buttons">
        <button class="floating-btn floating-btn-chat" onclick="openPanel('chatPanel')" title="Chat">
            <i class="fas fa-comments"></i>
        </button>
        <button class="floating-btn floating-btn-ai" onclick="openPanel('aiPanel')">
            <img src="assets/images/z-ai-avatar2.png" alt="Zaina AI">
        </button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  HLS.JS FOR LIVE STREAMING                                      -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!--  FIREBASE & JAVASCRIPT                                          -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        console.log('ğŸ¬ FLM TV - Initializing...');
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  JELLYFIN CONFIGURATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
      const JELLYFIN_CONFIG = {
    SERVER: '/jellyfin',
    API_KEY: '62131ee22c0141c6b651be75a7444350',
    USER_ID: '0407d4609a0346f99c09e0d7ddc9ccd1',
    
    COLLECTIONS: [
        { id: 'db6bb6388c8c4c70825698639853ede6', name: '00 Collections', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=db6bb6388c8c4c70825698639853ede6&collectionType=tvshows' },
        { id: 'adf5c3d30aa8572dcb64577f4ae6b105', name: '01 MOVIES 1', url: 'http://50.158.216.170:8096/web/#/movies?topParentId=adf5c3d30aa8572dcb64577f4ae6b105&collectionType=movies' },
        { id: '6fcfa6221b9a5741d5fdcf30f78f946b', name: '02 MOVIES 2', url: 'http://50.158.216.170:8096/web/#/movies?topParentId=6fcfa6221b9a5741d5fdcf30f78f946b&collectionType=movies' },
        { id: '7e2a5d7fd8bd73b8768e302be39536df', name: '03 AWESOME TV & FILMS', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=7e2a5d7fd8bd73b8768e302be39536df&collectionType=tvshows' },
        { id: '5ff2dc76882e099b56c555f868f29abe', name: '04 ASIAN CINEMA', url: 'http://50.158.216.170:8096/web/#/movies?topParentId=5ff2dc76882e099b56c555f868f29abe&collectionType=movies' },
        { id: 'ede598bcd27f80ea256af569dc7ac4a6', name: '05 CLASSIC TV', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=ede598bcd27f80ea256af569dc7ac4a6&collectionType=tvshows' },
        { id: 'ca43f3291c81d4f007f2b33936d256e6', name: '06 KIDS WORLD', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=ca43f3291c81d4f007f2b33936d256e6&collectionType=tvshows' },
        { id: 'a2347f687b9669054c8d2abbfd50889f', name: '07 GOLDEN CLASSICS', url: 'http://50.158.216.170:8096/web/#/movies?topParentId=a2347f687b9669054c8d2abbfd50889f&collectionType=movies' },
        { id: 'eaddf6d7a354f68f5f1c6ff947baf506', name: '08 FILIPINA-tv â˜€ï¸', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=eaddf6d7a354f68f5f1c6ff947baf506&collectionType=tvshows' },
        { id: 'c71a54b70069a28e508358fa66e2a286', name: '09 INTERNATIONAL Films', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=c71a54b70069a28e508358fa66e2a286&collectionType=tvshows' },
        { id: '48d96f519acf2fce600d06a4365632f4', name: '10 FLM NEWS FILIPINA', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=48d96f519acf2fce600d06a4365632f4&collectionType=tvshows' },
        { id: 'f412dea8334c1260f2bfd6cfa91dddf5', name: '11 ASIAN Animation', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=f412dea8334c1260f2bfd6cfa91dddf5&collectionType=tvshows' },
        { id: '5f2f2ace0732efb63f625d1346b9c766', name: '12 ZAINA ZONE', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=5f2f2ace0732efb63f625d1346b9c766&collectionType=tvshows' },
        { id: '5ed2753fb759a28245f2a4cb6dc2f4fd', name: '13 COMEDY', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=5ed2753fb759a28245f2a4cb6dc2f4fd&collectionType=tvshows' },
        { id: '56f8dc1075207592d3248a09358c587a', name: '14 DOCUMENTARIES', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=56f8dc1075207592d3248a09358c587a&collectionType=tvshows' },
        { id: '7a941a433e06ec0512b64b1d3b52c782', name: '15 MIDNIGHT CIRCUIT', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=7a941a433e06ec0512b64b1d3b52c782&collectionType=tvshows' },
        { id: 'c95ec3ddc1e8cf075ba24840d92ad9bd', name: 'BEYOND REALITY', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=c95ec3ddc1e8cf075ba24840d92ad9bd&collectionType=tvshows' },
        { id: '4e985111ed7f570b595204d82adb02f3', name: 'Books', url: 'http://50.158.216.170:8096/web/#/list?parentId=4e985111ed7f570b595204d82adb02f3&serverId=db6bb6388c8c4c70825698639853ede6' },
        { id: '8e596d67e544894b4502eba9aeb49b01', name: 'ESCAPE', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=8e596d67e544894b4502eba9aeb49b01&collectionType=tvshows' },
        { id: '12dc1447c71e042cf48154d67538804e', name: 'GAMING Coming Soon', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=12dc1447c71e042cf48154d67538804e&collectionType=tvshows' },
        { id: '2627e7d2c827d9bd908128d0320a8263', name: 'MUSIC', url: 'http://50.158.216.170:8096/web/#/music?topParentId=2627e7d2c827d9bd908128d0320a8263&collectionType=music' },
        { id: 'e2c00f297a5f80af390f52f72e782147', name: 'Music Videos', url: 'http://50.158.216.170:8096/web/#/list?parentId=e2c00f297a5f80af390f52f72e782147&serverId=db6bb6388c8c4c70825698639853ede6' },
        { id: '8215a671b88547b9b69213f8c3091211', name: 'TEENS+', url: 'http://50.158.216.170:8096/web/#/tv?topParentId=8215a671b88547b9b69213f8c3091211&collectionType=tvshows' }
    ]
};
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  FIREBASE & API CONFIGURATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const FIREBASE_CONFIG = {
            apiKey: "AIzaSyD871FYC8vGc7JAAw-2rGMZBB_h4sI0HpQ",
            authDomain: "flmtv-site-counter.firebaseapp.com",
            databaseURL: "https://flmtv-site-counter-default-rtdb.firebaseio.com",
            projectId: "flmtv-site-counter",
            storageBucket: "flmtv-site-counter.firebasestorage.app",
            messagingSenderId: "354930172302",
            appId: "1:354930172302:web:3176dfff3d81ce823404df"
        };
        
        const API_KEYS = {
            GEMINI: 'AIzaSyCpUcDg0fnz08_48qQe9eJksHRSnQkTezU',
            TMDB: '34773a6e0f80645a5b07a1ee76ecc26b',
            OMDB: '266aeb44',
            YOUTUBE: 'AIzaSyBJMZDXDPcVPUFhMKdYrABrke4PQZgRsT8'
        };
        
        // Initialize Firebase
        firebase.initializeApp(FIREBASE_CONFIG);
        const auth = firebase.auth();
        const database = firebase.database();
        
        // Sign in anonymously
        auth.signInAnonymously().catch(err => console.error('Firebase Auth Error:', err));
        
        console.log('âœ… Firebase initialized!');
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  HELPER FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        
     async function jellyfinFetch(endpoint, params = {}) {
    const baseUrl = JELLYFIN_CONFIG.SERVER;
    
    if (!baseUrl.startsWith('http')) {
        const queryString = new URLSearchParams();
        queryString.append('api_key', JELLYFIN_CONFIG.API_KEY);
        
        Object.keys(params).forEach(key => {
            if (params[key] !== null && params[key] !== undefined) {
                queryString.append(key, params[key]);
            }
        });
        
        const url = `${baseUrl}${endpoint}?${queryString.toString()}`;
        
        console.log('ğŸ” Fetching:', url);
        
        try {
            const response = await fetch(url, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json'
                }
            });
            
            if (!response.ok) {
                console.error('âŒ Jellyfin API Error:', response.status, response.statusText);
                return null;
            }
            const data = await response.json();
            console.log('âœ… Response:', data);
            return data;
        } catch (error) {
            console.error('âŒ Fetch Error:', error);
            return null;
        }
    }
    
    const url = new URL(`${baseUrl}${endpoint}`);
    url.searchParams.append('api_key', JELLYFIN_CONFIG.API_KEY);
    
    Object.keys(params).forEach(key => {
        if (params[key] !== null && params[key] !== undefined) {
            url.searchParams.append(key, params[key]);
        }
    });
    
    console.log('ğŸ” Fetching:', url.toString());
    
    try {
        const response = await fetch(url, {
            method: 'GET',
            mode: 'cors',
            credentials: 'omit',
            headers: {
                'Accept': 'application/json'
            }
        });
        
        if (!response.ok) {
            console.error('âŒ Jellyfin API Error:', response.status, response.statusText);
            return null;
        }
        const data = await response.json();
        console.log('âœ… Response:', data);
        return data;
    } catch (error) {
        console.error('âŒ Fetch Error:', error);
        return null;
    }
}
        
       function getImageUrl(itemId, imageTag, type = 'Primary') {
    return `${JELLYFIN_CONFIG.SERVER}/Items/${itemId}/Images/${type}?api_key=${JELLYFIN_CONFIG.API_KEY}&tag=${imageTag}&format=webp&maxHeight=450`;
}
        
        function scrollCategoryNav(direction) {
            const scroll = document.getElementById('categoryNavScroll');
            const scrollAmount = 300;
            scroll.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
        }
        
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  BUILD CATEGORY NAVIGATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function buildCategoryNav() {
            const navScroll = document.getElementById('categoryNavScroll');
            
            console.log('ğŸ¨ Building category navigation...');
            
            for (const collection of JELLYFIN_CONFIG.COLLECTIONS) {
                try {
                    // Get collection info to determine type
                    const collectionInfo = await jellyfinFetch(`/Users/${JELLYFIN_CONFIG.USER_ID}/Items/${collection.id}`, {});
                    
                    // Get 5 random items to find one with a good backdrop
                    const items = await jellyfinFetch(`/Users/${JELLYFIN_CONFIG.USER_ID}/Items`, {
                        ParentId: collection.id,
                        Limit: 5,
                        SortBy: 'Random',
                        Recursive: true
                    });
                    
                    let backdropUrl = 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=300';
                    
                    if (items && items.Items && items.Items.length > 0) {
                        // Try to find item with backdrop, otherwise use primary image
                        let foundBackdrop = false;
                        
                        for (const item of items.Items) {
                            if (item.BackdropImageTags && item.BackdropImageTags.length > 0) {
                                backdropUrl = `${JELLYFIN_CONFIG.SERVER}/Items/${item.Id}/Images/Backdrop?api_key=${JELLYFIN_CONFIG.API_KEY}&tag=${item.BackdropImageTags[0]}&format=webp&maxWidth=300`;
                                foundBackdrop = true;
                                break;
                            }
                        }
                        
                        // If no backdrop found, use primary image from first item
                        if (!foundBackdrop && items.Items[0].ImageTags?.Primary) {
                            backdropUrl = getImageUrl(items.Items[0].Id, items.Items[0].ImageTags.Primary, 'Primary');
                        }
                    }
                    
                    const navItem = document.createElement('div');
                    navItem.className = 'category-nav-item';
                    navItem.onclick = () => openJellyfinCollection(collection.id);
                    
                    navItem.innerHTML = `
                        <img src="${backdropUrl}" 
                             alt="${collection.name}" 
                             class="category-nav-image"
                             loading="lazy">
                        <div class="category-nav-overlay">
                            <div class="category-nav-name">${collection.name}</div>
                        </div>
                    `;
                    
                    navScroll.appendChild(navItem);
                    
                } catch (error) {
                    console.error(`Error building nav for ${collection.name}:`, error);
                }
            }
            
            console.log('âœ… Category navigation built!');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  LOAD CONTENT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function loadContent() {
            const container = document.getElementById('contentContainer');
            container.innerHTML = '<div class="loading-spinner"><div class="spinner"></div><div class="loading-text">Loading collections...</div></div>';
            
            console.log('ğŸ“š Loading collections...');
            
            let loadedCount = 0;
            const totalCollections = JELLYFIN_CONFIG.COLLECTIONS.length;
            
            for (const collection of JELLYFIN_CONFIG.COLLECTIONS) {
                // Skip 00 Collections - only show in category nav
                if (collection.name === '00 Collections') {
                    continue;
                }
                
                try {
                    loadedCount++;
                    
                    // Update loading text
                    const loadingText = container.querySelector('.loading-text');
                    if (loadingText) {
                        loadingText.textContent = `Loading ${collection.name}... (${loadedCount}/${totalCollections})`;
                    }
                    
                    console.log(`Loading: ${collection.name} (${loadedCount}/${totalCollections})`);
                    
                    const items = await jellyfinFetch(`/Users/${JELLYFIN_CONFIG.USER_ID}/Items`, {
                        ParentId: collection.id,
                        Limit: 10,
                        SortBy: 'SortName',
                        Recursive: true
                    });
                    
                    // Remove loading spinner on first collection
                    if (loadedCount === 1) {
                        container.innerHTML = '';
                    }
                    
                    // Create section even if empty
                    const section = document.createElement('section');
                    section.className = 'category-section';
                    section.id = `section-${collection.id}`;
                    
                    // Create header
                    const header = document.createElement('div');
                    header.className = 'category-header';
                    header.innerHTML = `
                        <h3 class="category-title">${collection.name}</h3>
                        <a onclick="openJellyfinCollection('${collection.id}')" class="view-all-btn" style="cursor: pointer;">
                            View All <i class="fas fa-arrow-right"></i>
                        </a>
                    `;
                    
                    // Create carousel
                    const carousel = document.createElement('div');
                    carousel.className = 'content-carousel';
                    
                    // Add items to carousel or show empty message
                    if (items && items.Items && items.Items.length > 0) {
                        items.Items.forEach(item => {
                            const card = document.createElement('div');
                            card.className = 'content-card';
                            card.onclick = () => playJellyfinItem(item.Id);
                            
                            // Try multiple image sources for better compatibility
                            let imageUrl = 'https://placehold.co/200x300?text=No+Image';
                            
                            if (item.ImageTags?.Primary) {
                                imageUrl = getImageUrl(item.Id, item.ImageTags.Primary, 'Primary');
                            } else if (item.SeriesThumb) {
                                imageUrl = `${JELLYFIN_CONFIG.SERVER}/Items/${item.SeriesId}/Images/Thumb?api_key=${JELLYFIN_CONFIG.API_KEY}&format=webp&maxHeight=450`;
                            } else if (item.SeriesPrimaryImageTag && item.SeriesId) {
                                imageUrl = `${JELLYFIN_CONFIG.SERVER}/Items/${item.SeriesId}/Images/Primary?api_key=${JELLYFIN_CONFIG.API_KEY}&tag=${item.SeriesPrimaryImageTag}&format=webp&maxHeight=450`;
                            } else if (item.ParentThumbImageTag && item.ParentThumbItemId) {
                                imageUrl = `${JELLYFIN_CONFIG.SERVER}/Items/${item.ParentThumbItemId}/Images/Thumb?api_key=${JELLYFIN_CONFIG.API_KEY}&tag=${item.ParentThumbImageTag}&format=webp&maxHeight=450`;
                            }
                            
                            card.innerHTML = `
                                <img src="${imageUrl}" 
                                     alt="${item.Name}" 
                                     class="content-card-image" 
                                     loading="lazy"
                                     onerror="this.src='https://placehold.co/200x300?text=${encodeURIComponent(item.Name)}'">
                                <div class="content-card-overlay">
                                    <div class="content-card-title">${item.Name}</div>
                                    <div class="content-card-info">
                                        ${item.ProductionYear || ''} ${item.OfficialRating ? 'â€¢ ' + item.OfficialRating : ''}
                                    </div>
                                </div>
                            `;
                            
                            carousel.appendChild(card);
                        });
                        console.log(`âœ… Loaded ${items.Items.length} items from ${collection.name}`);
                    } else {
                        // Show empty state
                        carousel.innerHTML = '<div style="padding: 2rem; color: #94a3b8; text-align: center;">No content available yet. Check back soon!</div>';
                        console.log(`âš ï¸ ${collection.name} is empty`);
                    }
                    
                    section.appendChild(header);
                    section.appendChild(carousel);
                    container.appendChild(section);
                    
                } catch (error) {
                    console.error(`Error loading ${collection.name}:`, error);
                }
            }
            
            console.log('ğŸ‰ All content loaded!');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  INITIALIZE APP
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // Modal and Panel Functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function openPanel(panelId) {
            console.log('ğŸ”¥ Opening panel:', panelId);
            
            // Close other panels
            document.querySelectorAll('.side-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            const panel = document.getElementById(panelId);
            if (panel) {
                panel.classList.add('active');
                console.log('âœ… Panel opened:', panelId);
            } else {
                console.error('âŒ Panel not found:', panelId);
            }
            
            // Push content left when panel opens
            document.body.classList.add('panel-active');
        }
        
        function closePanel(panelId) {
            document.getElementById(panelId).classList.remove('active');
            
            // Remove body padding when panel closes
            document.body.classList.remove('panel-active');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  LIVE TV CONTROLS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function openLiveTV() {
            const modal = document.getElementById('liveTvModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeLiveTV() {
            const modal = document.getElementById('liveTvModal');
            const frame = document.getElementById('liveStreamFrame');
            
            modal.classList.remove('active');
            // Reload iframe to stop stream when closing
            frame.src = frame.src;
            document.body.style.overflow = '';
        }
        
        // Click outside modal to close
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.classList.remove('active');
            }
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  AUTO-AUTHENTICATE AS PUBLIC USER
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function autoAuthenticatePublic() {
            try {
                console.log('ğŸ” Auto-authenticating as Public user...');
                
                const response = await fetch(`${JELLYFIN_CONFIG.SERVER}/Users/AuthenticateByName`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Emby-Authorization': `MediaBrowser Client="FLM Television Network", Device="Web Browser", DeviceId="flmtv-${Date.now()}", Version="1.0.0"`
                    },
                    body: JSON.stringify({
                        Username: 'Public',
                        Pw: ''
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('âœ… Auto-authenticated successfully!');
                    
                    // Store session in localStorage so Jellyfin web client can use it
                    const authData = {
                        AccessToken: data.AccessToken,
                        UserId: data.User.Id,
                        ServerId: JELLYFIN_CONFIG.SERVER
                    };
                    
                    // Try to set localStorage for Jellyfin domain
                    localStorage.setItem('jellyfin_credentials', JSON.stringify(authData));
                    
                    return true;
                } else {
                    console.log('âš ï¸ Auto-auth failed, user will need to login manually');
                    return false;
                }
            } catch (error) {
                console.log('âš ï¸ Auto-auth error:', error);
                return false;
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ DOM loaded, starting app...');
            
            // Auto-authenticate in background
            autoAuthenticatePublic();
            
            // Initialize hero banner slideshow
            initHeroBanner();
            
            // Live preview card - vMix Web Controller version
            // Stream shows when vMix is running on port 8088
            console.log('ğŸ“º Live TV card ready (vMix version)');
            
            
            // Attach button click handlers
            document.getElementById('signInBtn').onclick = () => openModal('signInModal');
            document.getElementById('parentLockBtn').onclick = () => openModal('parentLockModal');
            
            // Load content
            buildCategoryNav();
            loadContent();
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  HERO BANNER SLIDESHOW
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function initHeroBanner() {
            const heroBanner = document.getElementById('heroBanner');
            const slides = [];
            
            // Add your Zaina Show banner first
            slides.push({
                image: 'assets/images/ZainaShowTheaterBanner.jpg',
                title: 'The Zaina Juliette Show',
                description: 'Experience award-winning entertainment with music, theatrics, and holographic experiences at Planet Hollywood.',
                link: null
            });
            
            // Fetch featured content from Jellyfin
            try {
                const featured = await jellyfinFetch(`/Users/${JELLYFIN_CONFIG.USER_ID}/Items`, {
                    Limit: 4,
                    SortBy: 'Random',
                    Recursive: true,
                    IncludeItemTypes: 'Movie,Series',
                    ImageTypes: 'Backdrop'
                });
                
                if (featured && featured.Items) {
                    featured.Items.forEach(item => {
                        const backdropUrl = item.BackdropImageTags && item.BackdropImageTags[0]
                            ? getImageUrl(item.Id, item.BackdropImageTags[0], 'Backdrop')
                            : getImageUrl(item.Id, item.ImageTags.Primary, 'Primary');
                        
                        slides.push({
                            image: backdropUrl,
                            title: item.Name,
                            description: item.Overview || 'Stream now on FLM TV.',
                            link: item.Id
                        });
                    });
                }
            } catch (error) {
                console.error('Error loading featured content:', error);
            }
            
            // Build slides
            slides.forEach((slide, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = `hero-slide ${index === 0 ? 'active' : ''}`;
                slideDiv.style.backgroundImage = `url('${slide.image}')`;
                
                const content = document.createElement('div');
                content.className = 'hero-content';
                content.innerHTML = `
                    <h2 class="hero-title">${slide.title}</h2>
                    <p class="hero-description">${slide.description}</p>
                    <div class="hero-buttons">
                        <button class="btn btn-hero-primary" onclick="${slide.link ? `playJellyfinItem('${slide.link}')` : `alert('Coming soon!')`}">
                            <i class="fas fa-play"></i> ${slide.link ? 'Watch Now' : 'Learn More'}
                        </button>
                    </div>
                `;
                
                slideDiv.appendChild(content);
                heroBanner.appendChild(slideDiv);
            });
            
            // Auto-rotate slides every 5 seconds
            let currentSlide = 0;
            setInterval(() => {
                const allSlides = heroBanner.querySelectorAll('.hero-slide');
                allSlides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % allSlides.length;
                allSlides[currentSlide].classList.add('active');
            }, 5000);
        }
        
        function playJellyfinItem(itemId) {
            const viewer = document.getElementById('jellyfinViewer');
            const frame = document.getElementById('jellyfinFrame');
            
            // Open Jellyfin with API key to bypass login
            frame.src = `${JELLYFIN_CONFIG.SERVER}/web/index.html#!/details?id=${itemId}&api_key=${JELLYFIN_CONFIG.API_KEY}`;
            
            // Inject custom FLM TV branding after iframe loads
            frame.onload = function() {
                try {
                    injectCustomBranding(frame);
                } catch (e) {
                    console.log('Could not inject branding (CORS):', e);
                }
            };
            
            viewer.classList.add('active');
            document.body.style.overflow = 'hidden';
            document.body.classList.add('video-playing');
        }
        
        function openJellyfinCollection(collectionId) {
            const viewer = document.getElementById('jellyfinViewer');
            const frame = document.getElementById('jellyfinFrame');
            
            // Find the collection by ID to get its full URL
            const collection = JELLYFIN_CONFIG.COLLECTIONS.find(c => c.id === collectionId);
            
            if (collection && collection.url) {
                // Use the full working URL with API key
                frame.src = `${collection.url}${collection.url.includes('?') ? '&' : '?'}api_key=${JELLYFIN_CONFIG.API_KEY}`;
            } else {
                // Fallback to generic URL if not found
                frame.src = `${JELLYFIN_CONFIG.SERVER}/web/index.html#!/list.html?parentId=${collectionId}&api_key=${JELLYFIN_CONFIG.API_KEY}`;
            }
            
            // Show 7th Realm portal on first visit
            if (!localStorage.getItem('flm_portal_seen')) {
                setTimeout(() => {
                    const portal = document.getElementById('realmPortal');
                    if (portal) portal.style.display = 'flex';
                }, 2000);
            }
            
            // Inject custom FLM TV branding after iframe loads
            frame.onload = function() {
                try {
                    injectCustomBranding(frame);
                } catch (e) {
                    console.log('Could not inject branding (CORS):', e);
                }
            };
            
            viewer.classList.add('active');
            document.body.style.overflow = 'hidden';
            document.body.classList.add('video-playing');
        }
        
        // Inject FLM TV branding into Jellyfin iframe
        function injectCustomBranding(frame) {
            const doc = frame.contentDocument || frame.contentWindow.document;
            const style = doc.createElement('style');
            style.textContent = `
                /* Hide Jellyfin logo and replace with FLM TV branding */
                .headerLogo { display: none !important; }
                .headerRight::before {
                    content: 'FLM TV';
                    font-size: 2rem;
                    font-weight: 900;
                    background: linear-gradient(135deg, #fcd116 0%, #0038a8 100%);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    margin-right: 2rem;
                }
                
                /* Filipino Flag Colors */
                .skinHeader { background: #0038a8 !important; }
                .button-submit, .raised { background: #ce1126 !important; }
                .listItem:hover { background: rgba(252, 209, 22, 0.1) !important; }
                .itemSelectionPanel { border-color: #22c55e !important; }
                
                /* Login page customization */
                .loginPage { background: #0f172a !important; }
                .readOnlyContent { color: #e2e8f0 !important; }
                .inputContainer { background: rgba(255, 255, 255, 0.05) !important; }
                
                /* Buttons */
                .emby-button { 
                    background: linear-gradient(135deg, #0038a8 0%, #fcd116 100%) !important;
                    border: none !important;
                }
                .emby-button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(252, 209, 22, 0.3);
                }
            `;
            doc.head.appendChild(style);
        }
        
        function closeViewer() {
            const viewer = document.getElementById('jellyfinViewer');
            const frame = document.getElementById('jellyfinFrame');
            viewer.classList.remove('active');
            frame.src = ''; // Clear the iframe
            document.body.style.overflow = ''; // Restore scrolling
            document.body.classList.remove('video-playing');
            
            // Close any open panels
            document.querySelectorAll('.side-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.body.classList.remove('panel-active');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  CHAT FUNCTIONALITY
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatMessages = document.getElementById('chatMessages');
        const emojiBtn = document.getElementById('emojiBtn');
        const emojiPicker = document.getElementById('emojiPicker');
        
        const emojis = ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜Š', 'ğŸ˜‡', 'ğŸ™‚', 'ğŸ™ƒ', 'ğŸ˜‰', 'ğŸ˜Œ', 'ğŸ˜', 'ğŸ¥°', 'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™', 'ğŸ˜š', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ¤ª', 'ğŸ˜', 'ğŸ¤—', 'ğŸ¤­', 'ğŸ¤«', 'ğŸ¤”', 'ğŸ¤¨', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¶', 'ğŸ˜', 'ğŸ˜’', 'ğŸ™„', 'ğŸ˜¬', 'ğŸ¤¥', 'ğŸ˜Œ', 'ğŸ˜”', 'ğŸ˜ª', 'ğŸ¤¤', 'ğŸ˜´', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤§', 'ğŸ¥µ', 'ğŸ¥¶', 'ğŸ¥´', 'ğŸ˜µ', 'ğŸ¤¯', 'ğŸ¤ ', 'ğŸ¥³', 'ğŸ˜', 'ğŸ¤“', 'ğŸ§', 'ğŸ˜•', 'ğŸ˜Ÿ', 'ğŸ™', 'ğŸ˜®', 'ğŸ˜¯', 'ğŸ˜²', 'ğŸ˜³', 'ğŸ¥º', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜¨', 'ğŸ˜©', 'ğŸ˜«', 'ğŸ˜¤', 'ğŸ˜ ', 'ğŸ˜¡', 'ğŸ¤¬', 'ğŸ˜ˆ', 'ğŸ‘¿', 'ğŸ’€', 'ğŸ‘»', 'ğŸ’©', 'ğŸ¤¡', 'ğŸ‘¹', 'ğŸ‘º', 'ğŸ‘½', 'ğŸ‘¾', 'ğŸ¤–', 'ğŸ‘‹', 'ğŸ¤š', 'âœ‹', 'ğŸ‘Œ', 'âœŒï¸', 'ğŸ¤', 'ğŸ¤Ÿ', 'ğŸ¤˜', 'ğŸ¤™', 'ğŸ‘ˆ', 'ğŸ‘‰', 'ğŸ‘†', 'ğŸ‘‡', 'â˜ï¸', 'ğŸ‘', 'ğŸ‘', 'âœŠ', 'ğŸ‘Š', 'ğŸ‘', 'ğŸ™Œ', 'ğŸ‘', 'ğŸ¤²', 'ğŸ™', 'ğŸ’ª', 'â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'ğŸ¤', 'ğŸ–¤', 'ğŸ¤', 'ğŸ’”', 'â£ï¸', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’—', 'ğŸ’–', 'ğŸ’˜', 'ğŸ’', 'ğŸ”¥', 'ğŸ’§', 'ğŸ’¨', 'ğŸ¶', 'ğŸµ', 'ğŸ’¯'];
        
        // Populate emoji picker
        emojis.forEach(emoji => {
            const span = document.createElement('span');
            span.textContent = emoji;
            span.style.fontSize = '1.5em';
            span.style.cursor = 'pointer';
            span.style.padding = '0.2rem';
            span.style.borderRadius = '4px';
            span.addEventListener('click', () => insertEmoji(emoji));
            span.addEventListener('mouseenter', (e) => e.target.style.backgroundColor = '#3e3e3e');
            span.addEventListener('mouseleave', (e) => e.target.style.backgroundColor = 'transparent');
            emojiPicker.appendChild(span);
        });
        
        function addMessage(sender, text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ' + sender;
            messageDiv.style.marginBottom = '0.75rem';
            messageDiv.style.display = 'flex';
            messageDiv.style.alignItems = 'flex-start';
            messageDiv.style.justifyContent = sender === 'sent' ? 'flex-end' : 'flex-start';
            
            const messageBubble = document.createElement('div');
            messageBubble.className = 'message-bubble';
            messageBubble.style.maxWidth = '80%';
            messageBubble.style.padding = '0.6rem 0.9rem';
            messageBubble.style.borderRadius = '1rem';
            messageBubble.style.lineHeight = '1.4';
            messageBubble.style.wordWrap = 'break-word';
            messageBubble.style.backgroundColor = sender === 'sent' ? 'var(--secondary)' : '#333';
            messageBubble.style.color = 'white';
            messageBubble.style.borderBottomRightRadius = sender === 'sent' ? '0.25rem' : '1rem';
            messageBubble.style.borderBottomLeftRadius = sender === 'received' ? '0.25rem' : '1rem';
            
            // Support HTML content for AI visual responses
            if (text.includes('<div') || text.includes('<img')) {
                messageBubble.innerHTML = text;
            } else {
                messageBubble.textContent = text;
            }
            
            messageDiv.appendChild(messageBubble);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const messageText = chatInput.value.trim();
            if (messageText !== '') {
                addMessage('sent', messageText);
                chatInput.value = '';
                chatInput.style.height = 'auto';
                
                // Check if AI panel is active
                const aiPanel = document.getElementById('aiPanel');
                if (aiPanel && aiPanel.classList.contains('active')) {
                    // AI Mode - Send to Zaina AI
                    handleAIMessage(messageText);
                } else {
                    // Regular Chat Mode - Save to Firebase
                    const user = auth.currentUser;
                    if (user) {
                        database.ref('chat/messages').push({
                            text: messageText,
                            userId: user.uid,
                            timestamp: Date.now()
                        });
                    }
                }
            }
        }
        
        function insertEmoji(emoji) {
            chatInput.value += emoji;
            emojiPicker.style.display = 'none';
            chatInput.focus();
        }
        
        if (emojiBtn && sendBtn && chatInput) {
            emojiBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                emojiPicker.style.display = emojiPicker.style.display === 'flex' ? 'none' : 'flex';
            });
            
            document.addEventListener('click', (e) => {
                if (!emojiPicker.contains(e.target) && e.target !== emojiBtn) {
                    emojiPicker.style.display = 'none';
                }
            });
            
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            sendBtn.addEventListener('click', sendMessage);
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  ZAINA AI - INTELLIGENT ASSISTANT WITH VISUAL SEARCH
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function handleAIMessage(query) {
            try {
                console.log('ğŸ¤– Zaina AI processing:', query);
                
                // First try TMDB for movie/TV searches
                const tmdbResponse = await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${API_KEYS.TMDB}&query=${encodeURIComponent(query)}`);
                const tmdbData = await tmdbResponse.json();
                
                if (tmdbData.results && tmdbData.results.length > 0) {
                    // Visual search results
                    let visualResponse = '<div style="margin: 10px 0;">';
                    
                    tmdbData.results.slice(0, 3).forEach(item => {
                        const posterUrl = item.poster_path 
                            ? `https://image.tmdb.org/t/p/w200${item.poster_path}`
                            : 'https://placehold.co/200x300?text=No+Poster';
                        
                        const title = item.title || item.name;
                        const year = item.release_date ? `(${item.release_date.substring(0, 4)})` : 
                                     item.first_air_date ? `(${item.first_air_date.substring(0, 4)})` : '';
                        
                        visualResponse += `
                            <div style="margin-bottom: 15px; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px solid var(--neon-green);">
                                <img src="${posterUrl}" style="width: 100%; border-radius: 8px; margin-bottom: 10px;">
                                <strong style="color: var(--accent);">${title} ${year}</strong><br>
                                <small style="color: var(--text-secondary);">${item.overview ? item.overview.substring(0, 150) + '...' : 'No description available'}</small><br>
                                <small style="color: var(--neon-green);">â­ ${item.vote_average ? item.vote_average.toFixed(1) : 'N/A'}/10</small>
                            </div>
                        `;
                    });
                    
                    visualResponse += '</div>';
                    addMessage('received', visualResponse);
                    
                } else {
                    // Use Gemini AI for general questions
                    const geminiResponse = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEYS.GEMINI}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [{ 
                                        text: `You are Zaina AI, the intelligent assistant for FLM Television Network, a multicultural streaming platform serving Filipino audiences worldwide. Be friendly, helpful, and knowledgeable about entertainment, TV shows, and movies. Here's the user's question: ${query}` 
                                    }]
                                }]
                            })
                        }
                    );
                    
                    const geminiData = await geminiResponse.json();
                    const aiText = geminiData.candidates?.[0]?.content?.parts?.[0]?.text || 
                                   'Sorry, I could not process that. Please try again!';
                    addMessage('received', aiText);
                }
                
            } catch (err) {
                console.error('âŒ AI Error:', err);
                addMessage('received', 'Sorry, I encountered an error. Please try again! ğŸ’š');
            }
        }
        
        // Listen to Firebase chat messages
        database.ref('chat/messages').limitToLast(50).on('child_added', (snapshot) => {
            const msg = snapshot.val();
            const chatPanel = document.getElementById('chatPanel');
            
            // Only show in chat panel (not AI panel) and don't show own messages
            if (msg && chatPanel && chatPanel.classList.contains('active')) {
                const aiPanel = document.getElementById('aiPanel');
                if (!aiPanel || !aiPanel.classList.contains('active')) {
                    if (msg.userId !== auth.currentUser?.uid) {
                        addMessage('received', msg.text);
                    }
                }
            }
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  LIVE CHANNEL 26.5 HLS STREAMING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let hls = null;
        
        function openLiveStream() {
            console.log('ğŸ”´ Opening Live Channel 26.5...');
            const modal = document.getElementById('videoModal');
            const video = document.getElementById('liveVideo');
            modal.classList.add('active');
            
            // Your local HLS stream URL
            const streamUrl = 'http://50.158.216.170:8096:8080/hls/FLMTV.m3u8';
            
            if (Hls.isSupported()) {
                if (hls) {
                    hls.destroy();
                }
                hls = new Hls({
                    enableWorker: true,
                    lowLatencyMode: true,
                    backBufferLength: 90,
                    maxBufferLength: 30,
                    maxMaxBufferLength: 600,
                    startLevel: -1, // Auto quality
                    debug: false
                });
                hls.loadSource(streamUrl);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    console.log('âœ… HLS stream loaded');
                    video.play().catch(e => {
                        console.log('Autoplay prevented, user interaction needed:', e);
                    });
                });
                hls.on(Hls.Events.ERROR, function(event, data) {
                    if (data.fatal) {
                        console.error('âŒ HLS Fatal Error:', data);
                        switch(data.type) {
                            case Hls.ErrorTypes.NETWORK_ERROR:
                                console.log('Network error, trying to recover...');
                                hls.startLoad();
                                break;
                            case Hls.ErrorTypes.MEDIA_ERROR:
                                console.log('Media error, trying to recover...');
                                hls.recoverMediaError();
                                break;
                            default:
                                hls.destroy();
                                alert('Cannot load live stream. Please check if vMix/Nginx is running.');
                                break;
                        }
                    }
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                // Safari native HLS support
                video.src = streamUrl;
                video.addEventListener('loadedmetadata', function() {
                    video.play().catch(e => {
                        console.log('Autoplay prevented:', e);
                    });
                });
            } else {
                alert('Your browser does not support HLS streaming. Please try Chrome, Firefox, or Safari.');
            }
        }
        
        function closeLiveStream() {
            console.log('Closing live stream...');
            const modal = document.getElementById('videoModal');
            const video = document.getElementById('liveVideo');
            
            modal.classList.remove('active');
            video.pause();
            video.src = '';
            
            if (hls) {
                hls.destroy();
                hls = null;
            }
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  PASSWORD TOGGLE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const icon = input.nextElementSibling.querySelector('i');
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
    
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// âœ… FIX: "View All" (NO Jellyfin Web, NO login/logo flash)
// Uses Jellyfin API only + in-page navigation
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let activeCollectionId = null;
let activeCollectionName = null;

function openCollectionInline(collectionId, collectionName) {
  activeCollectionId = collectionId;
  activeCollectionName = collectionName || 'Collection';
  // push state so browser back works
  try { history.pushState({ page: 'collection', id: collectionId }, '', `?collectionId=${encodeURIComponent(collectionId)}`); } catch(e){}
  loadCollectionPage(collectionId, activeCollectionName);
}

window.addEventListener('popstate', (e) => {
  const params = new URLSearchParams(location.search);
  const cid = params.get('collectionId');
  if (cid) {
    loadCollectionPage(cid, activeCollectionName || 'Collection');
  } else {
    // back to normal browse
    activeCollectionId = null;
    activeCollectionName = null;
    if (typeof renderAllRows === 'function') renderAllRows();
  }
});

async function loadCollectionPage(collectionId, title) {
  // You should already have a main grid/container; we reuse the existing "allMoviesGrid" if present
  const grid = document.getElementById('allMoviesGrid') || document.getElementById('moviesGrid') || document.querySelector('.movies-grid');
  const heading = document.getElementById('pageTitle') || document.querySelector('h1') || null;

  if (heading) heading.textContent = title || 'Collection';
  if (!grid) { console.warn('No grid found to render collection'); return; }

  grid.innerHTML = `<div style="padding:20px;color:#94a3b8;">Loading ${title || 'collection'}â€¦</div>`;

  try {
    const url = `/Users/${JELLYFIN_CONFIG.USER_ID}/Items?ParentId=${encodeURIComponent(collectionId)}&Recursive=true&IncludeItemTypes=Movie,Series,Episode&Fields=PrimaryImageAspectRatio,PremiereDate,ProductionYear,RunTimeTicks,Overview&SortBy=SortName&SortOrder=Ascending`;
    const data = await jellyfinFetch(url);

    const items = (data && data.Items) ? data.Items : [];
    if (!items.length) {
      grid.innerHTML = `<div style="padding:20px;color:#94a3b8;">No items found in this collection.</div>`;
      return;
    }

    // Reuse your existing card renderer if you have one
    if (typeof createMovieCard === 'function') {
      grid.innerHTML = '';
      items.forEach(item => grid.appendChild(createMovieCard(item)));
      return;
    }

    // Fallback simple renderer
    grid.innerHTML = items.map(item => {
      const name = (item.Name || 'Untitled').replace(/"/g,'&quot;');
      const img = item.ImageTags && item.ImageTags.Primary
        ? `${JELLYFIN_CONFIG.SERVER}/Items/${item.Id}/Images/Primary?tag=${item.ImageTags.Primary}&quality=90&api_key=${JELLYFIN_CONFIG.API_KEY}`
        : '';
      return `
        <div style="width:180px;margin:10px;display:inline-block;vertical-align:top;">
          <div style="width:180px;height:270px;border-radius:12px;overflow:hidden;background:#111827;border:1px solid rgba(255,255,255,.08);">
            ${img ? `<img src="${img}" alt="${name}" style="width:100%;height:100%;object-fit:cover;">` : ''}
          </div>
          <div style="margin-top:8px;color:#e2e8f0;font-weight:700;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${name}</div>
        </div>`;
    }).join('');
  } catch (err) {
    console.error(err);
    grid.innerHTML = `<div style="padding:20px;color:#f87171;">Error loading collection.</div>`;
  }
}

</script>

</body>
</html>