<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>FLM TV</title>
<link rel="stylesheet" href="assets/styles.css">
<!-- Favicon link updated to the correct file that is just the logo icon -->
<!-- üåê Favicon and Icons -->
<link href="assets/logos/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="assets/logos/favicon-96x96.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="assets/logos/web-app-manifest-192x192.png" rel="icon" sizes="192x192" type="image/png"/>
<link href="assets/logos/web-app-manifest-512x512.png" rel="icon" sizes="512x512" type="image/png"/>
<link href="assets/logos/favicon.ico" rel="icon" type="image/x-icon"/>
<link href="assets/logos/site.webmanifest" rel="manifest"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com"></script>
<style>
        /* CSS Reset & Variables */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #e50914; /* Netflix Red */
            --primary-dark: #b8070f;
            --bg: #141414; /* Dark background */
            --bg-light: #1f1f1f;
            --text: #ffffff;
            --text-gray: #b3b3b3;
            --card-bg: #282828;
            --border-color: #333;
            --panel-width: 350px;
        }
        
        /* Base body and layout styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            padding-bottom: 2rem;
            overflow-x: hidden;
            transition: padding-right 0.3s ease-in-out;
        }

        /* Class to apply when a panel is open */
        body.panel-active {
            padding-right: var(--panel-width);
            overflow-y: hidden; /* Prevent vertical scroll when panel is open */
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            flex-wrap: wrap; /* Allow wrapping on small screens */
        }

        .header .logo-container {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .header .logo-text {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        /* Navigation Buttons and Search Bar */
        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
            margin-left: auto; /* Push buttons to the right */
        }

        .header-search-bar {
            background-color: var(--bg-light);
            border-radius: 9999px; /* Rounded pill shape */
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            max-width: 250px;
        }

        .header-search-input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--text);
            font-size: 1rem;
            width: 100%;
        }

        .header-search-input::placeholder {
            color: var(--text-gray);
        }

        .nav-button {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .nav-button:hover {
            color: var(--primary);
        }
        
        .sign-in-button {
            background-color: var(--primary);
            color: var(--text);
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .sign-in-button:hover {
            background-color: var(--primary-dark);
        }

        /* Hero Banner */
        .hero-banner {
            position: relative;
            width: 100%;
            height: 450px;
            overflow: hidden;
            background-image: url('https://placehold.co/1400x450/141414/fff?text=Hero+Banner');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            padding: 0 2rem;
        }
        
        .hero-banner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 40%, rgba(0,0,0,0) 100%);
        }
        
  .hero-image-wrapper {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  overflow: hidden;
}

.hero-image-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.hero-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: linear-gradient(to right, rgba(0,0,0,0.8) 40%, rgba(0,0,0,0) 100%);
}

.hero-banner {
  position: relative;
  height: 450px;
  display: flex;
  align-items: center;
  padding: 0 2rem;
  color: #fff;
}

.hero-content {
  position: relative;
  z-index: 2;
  max-width: 50%;
}
      
        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 600px;
        }
        
        .hero-content h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .hero-content p {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
        }
        
        .play-button {
            background-color: var(--primary);
            color: var(--text);
            padding: 0.75rem 2rem;
            border-radius: 0.25rem;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .play-button:hover {
            background-color: var(--primary-dark);
        }
        
        /* Floating Button Container */
        .floating-button-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            z-index: 2000;
            transition: right 0.3s ease-in-out;
        }

        body.panel-active .floating-button-container {
            right: calc(2rem + var(--panel-width));
        }

        .floating-button {
            width: 60px;
            height: 60px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            padding: 0;
        }

        .floating-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0,0,0,0.6);
        }

        .floating-button svg {
            color: var(--text);
            font-size: 1.75rem;
            width: 32px;
            height: 32px;
        }

        /* Zaina AI specific floating button styles */
        #floatingZainaAiButton {
            background-color: var(--bg-light);
            border: 2px solid var(--primary);
            overflow: hidden;
            width: 60px;
            height: 60px;
            padding: 0;
            border-radius: 50%;
        }

        #floatingZainaAiButton img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        /* Category Links Container */
        .category-links {
            display: flex;
            justify-content: flex-start;
            gap: 1.5rem; /* Increased gap for text links */
            padding: 1rem 0;
            overflow-x: auto;
            align-items: center;
        }
        
        .category-links::-webkit-scrollbar {
            display: none;
        }

        .category-link {
            font-size: 1rem;
            color: var(--text-gray);
            white-space: nowrap;
            cursor: pointer;
            transition: color 0.3s;
            text-decoration: none; /* Remove underline from links */
        }
        
        .category-link:hover {
            color: var(--primary);
        }

        /* Movie Carousels */
        .movie-carousel-section {
            margin-top: 2rem;
        }
        
        .carousel-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .movie-card-carousel {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem 0;
            scroll-behavior: smooth;
        }
        
        .movie-card-carousel::-webkit-scrollbar {
            display: none;
        }
        
        .movie-card {
            flex: 0 0 150px;
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
            position: relative;
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            overflow: hidden;
        }

        .movie-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        .movie-poster {
            width: 100%;
            height: 225px;
            object-fit: cover;
            border-bottom: 2px solid var(--primary);
        }

        .movie-title {
            padding: 0.5rem;
            font-size: 0.875rem;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        .modal-content {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 0.5rem;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: var(--text-gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: var(--primary);
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-form-group {
            margin-bottom: 1rem;
        }

        .modal-input {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.25rem;
            background-color: var(--bg-light);
            border: 1px solid var(--border-color);
            color: var(--text);
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .modal-button-primary {
            width: 100%;
            padding: 0.75rem;
            background-color: var(--primary);
            color: var(--text);
            border: none;
            border-radius: 0.25rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .modal-button-primary:hover {
            background-color: var(--primary-dark);
        }

        .modal-text-link {
            color: var(--text-gray);
            font-size: 0.875rem;
            text-align: center;
            display: block;
            margin-top: 1rem;
        }
        
        .modal-text-link:hover {
            text-decoration: underline;
        }

        /* Panel Styles for Chat and AI Assistant */
        .side-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: var(--panel-width);
            height: 100%;
            background-color: var(--bg-light);
            box-shadow: -4px 0 10px rgba(0,0,0,0.5);
            transition: transform 0.3s ease-in-out;
            transform: translateX(var(--panel-width)); /* Initially off-screen to the right */
            z-index: 2500;
            display: flex;
            flex-direction: column;
        }

        .side-panel.open {
            transform: translateX(0); /* Slide in */
        }

        /* --- Chatbox styles from your provided file --- */
        #chatPanel {
            background-color: #1a1a1a; /* Dark background for chatbox */
            color: #ffffff;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 2500;
        }
        
        .chat-header {
            background-color: #282828;
            padding: 1rem;
            border-bottom: 1px solid #333;
            text-align: center;
            font-weight: 600;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-messages {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            background-color: #1a1a1a;
        }
        
        .message {
            margin-bottom: 0.75rem;
            display: flex;
            align-items: flex-start;
        }
        
        .message.sent {
            justify-content: flex-end;
        }
        
        .message.received {
            justify-content: flex-start;
        }
        
        .message-bubble {
            max-width: 80%;
            padding: 0.6rem 0.9rem;
            border-radius: 1rem;
            line-height: 1.4;
            word-wrap: break-word;
        }
        
        .message.sent .message-bubble {
            background-color: #e50914; /* Primary red for sent messages */
            color: white;
            border-bottom-right-radius: 0.25rem;
        }
        
        .message.received .message-bubble {
            background-color: #333; /* Darker grey for received messages */
            color: white;
            border-bottom-left-radius: 0.25rem;
        }
        
        .message-sender {
            font-size: 0.75em;
            color: #b3b3b3;
            margin-bottom: 0.25rem;
            padding-left: 0.5rem;
        }
        
        .message.sent .message-sender {
            text-align: right;
            padding-right: 0.5rem;
            padding-left: 0;
        }
        
        .chat-input-area {
            background-color: #282828;
            padding: 1rem;
            border-top: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }
        
        .chat-input {
            flex-grow: 1;
            padding: 0.75rem;
            border-radius: 1.5rem;
            border: 1px solid #444;
            background-color: #333;
            color: white;
            outline: none;
            font-size: 1em;
            resize: none;
            min-height: 40px;
            max-height: 100px;
            overflow-y: auto;
        }
        
        .chat-input::placeholder {
            color: #b3b3b3;
        }
        
        .chat-btn {
            background-color: #e50914;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2em;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
        }
        
        .chat-btn:hover {
            background-color: #b8070f;
        }
        
        /* Emoji Picker */
        .emoji-picker {
            position: absolute;
            bottom: calc(100% + 10px);
            left: 0;
            right: 0;
            background-color: #282828;
            border-radius: 8px;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.4);
            padding: 1rem;
            display: none;
            flex-wrap: wrap;
            gap: 0.5rem;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
        }
        
        .emoji-picker span {
            font-size: 1.5em;
            cursor: pointer;
            padding: 0.2rem;
            border-radius: 4px;
            transition: background-color 0.1s ease;
        }
        
        .emoji-picker span:hover {
            background-color: #3e3e3e;
        }
        /* --- End of chatbox styles --- */

    
/* ensure sections are relative for arrows */
.movie-carousel-section{ position:relative; margin-top: 2rem; }
.flm-nav.left{ left: 4px !important; }
.flm-nav.right{ right: 4px !important; }
</style>
</head>
<body>
<!-- Floating Button Container -->
<div class="floating-button-container">
<!-- Zaina AI Floating Button -->
<button class="floating-button" id="floatingZainaAiButton">
<!-- Updated Zaina AI avatar image source -->
<img alt="Zaina AI" class="w-full h-full object-cover rounded-full" src="57c180cd-995b-4d17-81f1-8f2fb25350f7.png"/>
</button>
<!-- Floating Chat Button -->
<button class="floating-button" id="floatingChatButton">
<svg class="lucide lucide-message-square" fill="none" height="32" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
</button>
</div>
<!-- Header -->
<header class="header container">
<div class="logo-container">
<!-- Updated to only have the logo image and the text has been put back -->
<img alt="FLM Logo" class="h-10 rounded-md" src="assets/logos/flm-logo.png"/>
<span class="logo-text ml-2">FLM TV</span>
</div>
<div class="nav-buttons">
<div class="header-search-bar">
<input class="header-search-input" id="headerSearchInput" placeholder="Search..." type="text"/>
</div>
<button class="nav-button" id="bellButton">
<i class="fas fa-bell"></i>
</button>
<button class="sign-in-button" id="authButton">Sign In</button>
</div>
</header>
<!-- Hero Banner -->
<!-- Hero Banner -->
<section class="hero-banner" id="hero-banner">
  <div class="hero-image-wrapper">
    <img id="hero-banner-image" src="/assets/images/ZainaShowTheaterBanner.jpg" alt="Hero Banner">
    <div class="hero-overlay"></div>
  </div>
  <div class="hero-content">
    <h1 id="hero-title">Loading title...</h1>
    <p id="hero-description">Loading description...</p>
    <a class="play-button" href="#" id="playButton">Play</a>
  </div>
</section>
<!-- Main Content Container -->
<main class="container">
<!-- Movie Carousel Sections -->
</main>
<!-- Login Modal -->
<div class="modal-overlay" id="loginModal">
<div class="modal-content">
<span class="modal-close" id="closeLoginModal">√ó</span>
<h2 class="modal-title">Log In</h2>
<form>
<div class="modal-form-group">
<input class="modal-input" id="email" placeholder="Email Address" required="" type="email"/>
</div>
<div class="modal-form-group relative">
<input class="modal-input" id="password" placeholder="Password" required="" type="password"/>
<!-- Password visibility toggle can be added here -->
</div>
<a class="text-xs text-gray-500 hover:underline block text-right mb-4" href="#">Forgot Password?</a>
<button class="modal-button-primary mb-4" id="loginBtn" type="button">Log In</button>
</form>
<div class="text-center text-sm mb-4">
                Not a member? <a class="text-red-500 hover:underline" href="#">Sign Up</a>
</div>
<hr class="border-gray-700 my-4"/>
<button class="w-full py-2 px-4 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors duration-200" type="button">
<i class="fas fa-crown text-yellow-400 mr-2"></i> Try Paid Membership
            </button>
</div>
</div>
<!-- Zaina AI Side Panel -->
<div class="side-panel" id="zainaAiPanel">
<div class="chat-header">
<!-- Updated Zaina AI avatar image source -->
<img alt="Zaina AI" class="w-10 h-10 rounded-full" src="57c180cd-995b-4d17-81f1-8f2fb25350f7.png"/>
<span class="panel-title">Zaina J AI</span>
<button class="panel-close" id="closeZainaAiPanel">
<i class="fas fa-times"></i>
</button>
</div>
<div class="panel-content p-4">
<h3 class="text-lg font-semibold mb-2">Search film info, trailers, actors...</h3>
<div class="flex items-center gap-2 mb-4">
<input class="w-full px-4 py-2 rounded-md bg-gray-700 text-white border border-gray-600 focus:outline-none focus:border-red-500" id="aiSearchInput" placeholder="Search film..." type="text"/>
<button class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors" id="aiSearchButton">Search</button>
</div>
<h3 class="text-lg font-semibold mb-2 text-green-500">AI Assistant</h3>
<p class="text-sm mb-4 text-gray-400">Hello! I'm Zaina, your personal AI assistant. I can help you find information about movies, series, actors, and more. Just type your query above.</p>
<p class="text-sm font-semibold mb-2">Example queries:</p>
<ul class="list-disc list-inside text-sm text-gray-400">
<li>"Tell me about the movie Inception."</li>
<li>"Who is the director of Oppenheimer?"</li>
<li>"Show me movies starring Tom Hanks."</li>
</ul>
</div>
</div>
<!-- Chat Side Panel -->
<div class="side-panel" id="chatPanel">
<div class="chat-header">
<span>Live Chat</span>
<button class="text-white text-xl px-2 py-1 rounded-full hover:bg-gray-700" id="closeChatPanel">
<i class="fas fa-times"></i>
</button>
</div>
<div class="chat-messages" id="chatMessages">
<!-- Chat messages will be appended here -->
<div class="message received">
<div class="message-bubble">Welcome to the chat!</div>
</div>
<div class="message sent">
<div class="message-bubble">Hello there!</div>
</div>
</div>
<div class="chat-input-area">
<textarea class="chat-input" id="chatInput" placeholder="Type your message..."></textarea>
<button class="chat-btn" id="emojiBtn">
                üòÄ
            </button>
<button class="chat-btn" id="sendBtn">
<i class="fas fa-paper-plane"></i>
</button>
<div class="emoji-picker" id="emojiPicker">
<!-- Emojis will be dynamically generated here -->
</div>
</div>
</div>
<script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('FLM TV is ready.');
	
	  // --- JELLYFIN CONFIGURATION ---
            // START OF JELLYFIN CODE INSERTION

            // IMPORTANT: This is your public Jellyfin URL via DuckDNS.
            // Using HTTP (port 8096) as default.
            // If you have configured HTTPS on your Jellyfin/NAS, use 'https://' and port 8920 (default HTTPS).

                       }
            }

           
            // Example calls to populate your carousels:
            loadMoviesIntoCarousel(
                '.movie-carousel-section:nth-of-type(1) .movie-card-carousel', 
                '.movie-carousel-section:nth-of-type(1) .carousel-title',     
                {
                    SortBy: 'DateCreated', 
                    SortOrder: 'Descending',
                    IncludeItemTypes: 'Movie',
                    Recursive: 'true',
                    Fields: 'PrimaryImageAspectRatio,Overview',
                    Limit: '10'
                }
            );

            loadMoviesIntoCarousel(
                '.movie-carousel-section:nth-of-type(2) .movie-card-carousel', 
                '.movie-carousel-section:nth-of-type(2) .carousel-title',     
                {
                    SortBy: 'DateAdded', 
                    SortOrder: 'Descending',
                    IncludeItemTypes: 'Movie',
                    Recursive: 'true',
                    Fields: 'PrimaryImageAspectRatio,Overview',
                    Limit: '10'
                }
            );


            // --- Authentication and Modal Logic ---
            let isLoggedIn = false;
            const authButton = document.getElementById('authButton');
            const loginModal = document.getElementById('loginModal');
            const closeLoginModalBtn = document.getElementById('closeLoginModal');
            const loginBtn = document.getElementById('loginBtn');
            const headerSearchInput = document.getElementById('headerSearchInput');

            function showModal() {
                loginModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            function hideModal() {
                loginModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }

            authButton.addEventListener('click', () => {
                if (isLoggedIn) {
                    // Log out
                    isLoggedIn = false;
                    authButton.textContent = 'Sign In';
                    console.log('User logged out.');
                } else {
                    showModal();
                }
            });

            loginBtn.addEventListener('click', () => {
                    // Log in
                    isLoggedIn = true;
                    authButton.textContent = 'Sign Out';
                    hideModal();
                    console.log('User logged in.');
            });

            closeLoginModalBtn.addEventListener('click', hideModal);

            loginModal.addEventListener('click', (event) => {
                if (event.target === loginModal) {
                    hideModal();
                }
            });

            // --- Side Panel Logic for Zaina AI and Chat ---
            const floatingZainaAiButton = document.getElementById('floatingZainaAiButton');
            const floatingChatButton = document.getElementById('floatingChatButton');
            const zainaAiPanel = document.getElementById('zainaAiPanel');
            const chatPanel = document.getElementById('chatPanel');
            const closeZainaAiPanelBtn = document.getElementById('closeZainaAiPanel');
            const closeChatPanelBtn = document.getElementById('closeChatPanel');
            
            // Function to toggle a side panel and shift the main content
            function togglePanel(panel) {
                const body = document.body;
                
                if (panel.classList.contains('open')) {
                    panel.classList.remove('open');
                    body.classList.remove('panel-active');
                    console.log('Panel closed, removing panel-active class.');
                } else {
                    // Close the other panel if it's open
                    if (panel === zainaAiPanel && chatPanel.classList.contains('open')) {
                        chatPanel.classList.remove('open');
                    } else if (panel === chatPanel && zainaAiPanel.classList.contains('open')) {
                        zainaAiPanel.classList.remove('open');
                    }

                    // Open the new panel and add the class to the body
                    panel.classList.add('open');
                    body.classList.add('panel-active');
                    console.log('Panel opened, adding panel-active class.');
                }
            }
            
            // Event listeners for the floating buttons
            floatingZainaAiButton.addEventListener('click', () => {
                togglePanel(zainaAiPanel);
                console.log('Zaina AI button clicked.');
            });

            floatingChatButton.addEventListener('click', () => {
                togglePanel(chatPanel);
                console.log('Chat button clicked.');
            });

            // Event listeners for the close buttons inside the panels
            closeZainaAiPanelBtn.addEventListener('click', () => {
                closePanel(zainaAiPanel);
                console.log('Zaina AI panel closed via close button.');
            });
            
            closeChatPanelBtn.addEventListener('click', () => {
                closePanel(chatPanel);
                console.log('Chat panel closed via close button.');
            });

            // A dedicated function to close a panel and manage body classes
            function closePanel(panel) {
                panel.classList.remove('open');
                if (!zainaAiPanel.classList.contains('open') && !chatPanel.classList.contains('open')) {
                    document.body.classList.remove('panel-active');
                }
            }

            // Event listener for the header search bar
            headerSearchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    console.log(`Searching for: ${headerSearchInput.value}`);
                }
            });


            // --- Other Interactive Elements ---
            const categoryLinks = document.querySelectorAll('.category-link');
            categoryLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    console.log(`Category "${e.target.textContent}" was clicked.`);
                });
            });

            const movieCards = document.querySelectorAll('.movie-card');
            movieCards.forEach(card => {
                card.addEventListener('click', () => {
                    const movieTitle = card.querySelector('.movie-title').textContent;
                    console.log(`Movie card for "${movieTitle}" was clicked.`);
                });
            });

            const playButton = document.getElementById('playButton');
            playButton.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Hero banner "Play" button clicked.');
            });

            const bellButton = document.getElementById('bellButton');
            bellButton.addEventListener('click', () => {
                console.log('Notifications button clicked. Opening notifications...');
            });

            // --- Chatbox Script Logic ---
            const chatInput = document.getElementById('chatInput');
            const sendBtn = document.getElementById('sendBtn');
            const chatMessages = document.getElementById('chatMessages');
            const emojiBtn = document.getElementById('emojiBtn');
            const emojiPicker = document.getElementById('emojiPicker');
            const emojis = [ 'üòÄ', 'üòÉ', 'üòÑ', 'üòÅ', 'üòÜ', 'üòÖ', 'üòÇ', 'ü§£', 'üòä', 'üòá', 'üôÇ', 'üôÉ', 'üòâ', 'üòå', 'üòç', 'ü•∞', 'üòò', 'üòó', 'üòô', 'üòö', 'üòã', 'üòõ', 'üòú', 'ü§™', 'üòù', 'ü§ó', 'ü§≠', 'ü§´', 'ü§î', 'ü§®', 'üòê', 'üòë', 'üò∂', 'üòè', 'üòí', 'üôÑ', 'üò¨', 'ü§•', 'üòå', 'üòî', 'üò™', 'ü§§', 'üò¥', 'üò∑', 'ü§í', 'ü§ï', 'ü§¢', 'ü§Æ', 'ü§ß', 'ü•µ', 'ü•∂', 'ü•¥', 'üòµ', 'ü§Ø', 'ü§†', 'ü•≥', 'üòé', 'ü§ì', 'üßê', 'üòï', 'üòü', 'üôÅ', 'üòÆ', 'üòØ', 'üò≤', 'üò≥', 'ü•∫', 'üò¶', 'üòß', 'üò®', 'üò©', 'üò´', 'üò§', 'üò†', 'üò°', 'ü§¨', 'üòà', 'üëø', 'üíÄ', 'üëª', 'üí©', 'ü§°', 'üëπ', 'üë∫', 'üëΩ', 'üëæ', 'ü§ñ', 'üëã', 'ü§ö', 'üñêÔ∏è', '‚úã', 'üññ', 'üëå', 'ü§è', '‚úåÔ∏è', 'ü§û', 'ü§ü', 'ü§ò', 'ü§ô', ' ', 'üëâ', 'üëÜ', 'üñï', 'üëá', '‚òùÔ∏è', 'üëç', 'üëé', '‚úä', 'üëä', 'ü§õ', 'ü§ú', 'üëè', 'üôå', 'üëê', 'ü§≤', 'ü§ù', 'üôè', '‚úçÔ∏è', 'üíÖ', 'ü§≥', 'üí™', 'ü¶æ', 'ü¶ø', 'ü¶µ', 'ü¶∂', 'üëÇ', 'üëÉ', 'üß†', 'ü¶∑', 'ü¶¥', 'üëÄ', 'üëÅÔ∏è', 'üëÖ', 'üëÑ', 'üíã', 'ü©∏', 'ü¶†', '‚ù§', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú', 'ü§é', 'üñ§', 'ü§ç', 'üíî', '‚ù£', 'üíï', 'üíû', 'üíì', 'üíó', 'üíñ', 'üíò', 'üíù', 'üí¢', 'üí£', 'üí•', 'üí´', 'üí¨', 'üó®Ô∏è', 'üóØÔ∏è', 'üí≠', 'üí§', 'üíØ', 'üî•', 'üíß', 'üí®', 'üé∂', 'üéµ', 'üó£Ô∏è', 'üëÇ', 'ü™°', 'üßµ', 'ü™¢', 'üß∂', 'üßµ'];
            
            // Populate emoji picker with emojis
            emojis.forEach(emoji => {
                const span = document.createElement('span');
                span.textContent = emoji;
                span.addEventListener('click', () => insertEmoji(emoji));
                emojiPicker.appendChild(span);
            });
            
            function addMessage(sender, text) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', sender);
                
                const messageBubble = document.createElement('div');
                messageBubble.classList.add('message-bubble');
                messageBubble.textContent = text;

                messageDiv.appendChild(messageBubble);
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight; // Auto-scroll
            }

            function sendMessage() {
                const messageText = chatInput.value.trim();
                if (messageText !== '') {
                    addMessage('sent', messageText);
                    chatInput.value = '';
                    chatInput.style.height = 'auto'; // Reset height
                }
            }
            
            function insertEmoji(emoji) {
                chatInput.value += emoji;
                emojiPicker.style.display = 'none';
                chatInput.focus();
            }
            
            emojiBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                emojiPicker.style.display = emojiPicker.style.display === 'flex' ? 'none' : 'flex';
            });
            
            document.addEventListener('click', (e) => {
                if (!emojiPicker.contains(e.target) && e.target !== emojiBtn) {
                    emojiPicker.style.display = 'none';
                }
            });
            
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            sendBtn.addEventListener('click', sendMessage);
        });
    </script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  // Try both names you‚Äôve used in the project
  const CANDIDATES = [
    "assets/images/zaina_ai_avatar.jpg",
    "assets/images/zaina-ai-avatar2.png"
  ];
  const LOGO_SRC = "assets/logos/your-logo-file.png";

  const zainaSelectors = [
    '#floatingZainaAiButton img',
    '#lumaToggleBtnFloating img',
    '#fabAIToggleBtn img',
    '#searchBarAIToggleBtn img',
    '#playerAIToggleBtn img',
    '#lumaPanel .luma-header img',
    '#zainaAvatar',
    'img[alt*="Zaina" i]'
  ];
  const logoSelectors = [
    'header .logo img',
    'img[alt*="logo" i]',
    'img[src*="assets/logos/"]'
  ];

  function setWithFallback(img){
    let i = 0;
    function tryNext(){
      if (i >= CANDIDATES.length) return;
      const src = CANDIDATES[i++];
      img.removeAttribute('srcset');
      img.onerror = tryNext;
      img.src = src;
    }
    tryNext();
  }
  function setLogo(img){
    img.removeAttribute('srcset');
    img.src = LOGO_SRC;
  }

  function updateAll(){
    zainaSelectors.forEach(sel => document.querySelectorAll(sel).forEach(setWithFallback));
    logoSelectors.forEach(sel => document.querySelectorAll(sel).forEach(setLogo));
  }

  updateAll();
  new MutationObserver(updateAll).observe(document.documentElement, { childList: true, subtree: true });

  // Debug counts (optional)
  console.log("Zaina imgs:", document.querySelectorAll(zainaSelectors.join(',')).length,
              "Logo imgs:", document.querySelectorAll(logoSelectors.join(',')).length);
});
</script>

<!-- üåô FLM Viewer Footer (Homepage Only) -->
<!-- üõ∏ Alien Walker (Daily Limit 4) -->
<img alt="Alien Walk" id="alienGreeting" src="assets/images/alien-flm-sign.png" style="position: absolute; top: 100px; left: -150px; width: 100px; opacity: 1; display: none; transition: left 6s linear, opacity 1s ease-out; z-index: 9999;"/>
<script>
(function () {
  const alien = document.getElementById("alienGreeting");
  const now = new Date();
  const today = now.toISOString().split("T")[0];
  const greetData = JSON.parse(localStorage.getItem("greetData") || "{}");
  const fadeOutDelay = 10000;

  if (greetData.date !== today) {
    greetData.date = today;
    greetData.count = 0;
  }

  if (greetData.count < 3 && alien) {
    alien.style.display = "block";
    setTimeout(() => alien.style.left = "50vw", 300);
    setTimeout(() => alien.style.opacity = "0", fadeOutDelay);
    setTimeout(() => alien.remove(), fadeOutDelay + 2000);
    greetData.count++;
    localStorage.setItem("greetData", JSON.stringify(greetData));
  }
})();
</script>
<script>
// üî¥ START FLM JELLYFIN MODULE (no DOM changes)
(function(){
  // You can override at runtime with: window.FLM_JF_CONFIG = { url:'http://IP:PORT', key:'APIKEY' }
  const DEF = { url: 'http://192.168.1.28:8096', key: '807c4d78a3b2468792243d8be7bbf62f' };
  const CFG = Object.assign({}, DEF, (window.FLM_JF_CONFIG || {}));

  async function jf(path, params = {}){
    const url = new URL(CFG.url + path);
    Object.entries(params).forEach(([k,v]) => url.searchParams.set(k, v));
    const res = await fetch(url, { headers: { 'X-Emby-Token': CFG.key, 'Accept':'application/json' } });
    if(!res.ok) throw new Error('Jellyfin HTTP ' + res.status);
    return res.json();
  }

  function posterUrl(it, h=360){
    const tag = it && it.ImageTags && it.ImageTags.Primary; if(!tag) return '';
    const u = new URL(`${CFG.url}/Items/${it.Id}/Images/Primary`);
    u.searchParams.set('maxHeight', h); u.searchParams.set('quality', 90);
    u.searchParams.set('tag', tag); u.searchParams.set('api_key', CFG.key);
    return u.toString();
  }

  function backdropUrl(it, w=1600, h=700){
    const tag = (it && it.BackdropImageTags && it.BackdropImageTags[0]); if(!tag) return '';
    const u = new URL(`${CFG.url}/Items/${it.Id}/Images/Backdrop`);
    u.searchParams.set('maxWidth', w); u.searchParams.set('maxHeight', h);
    u.searchParams.set('quality', 90); u.searchParams.set('tag', tag);
    u.searchParams.set('api_key', CFG.key);
    return u.toString();
  }

  async function latest({limit=20, types='Movie,Series', sortBy='DateAdded'}={}){
    const data = await jf('/Items', {
      IncludeItemTypes: types, Recursive:'true',
      SortBy: sortBy, SortOrder:'Descending',
      Limit: String(limit),
      Fields: 'ImageTags,BackdropImageTags,Overview,OfficialRating,Genres'
    });
    return data.Items || [];
  }

  async function getItem(id){
    return jf(`/Items/${id}`, { Fields: 'ImageTags,BackdropImageTags,Overview,OfficialRating,Genres' });
  }

  // export (namespaced so it won't touch your DOM or other code)
  window.FLM = window.FLM || {};
  window.FLM.JF = { cfg: CFG, jf, latest, getItem, posterUrl, backdropUrl };
})();
// üü¢ END FLM JELLYFIN MODULE (no DOM changes)
</script>

<script>
// üé• Hero Banner Slideshow (rotates through Jellyfin latest)
document.addEventListener('DOMContentLoaded', () => {
  if (window.FLM && FLM.JF) {
    FLM.JF.latest({ limit: 6, types: 'Movie,Series', sortBy: 'DateAdded' })
      .then(items => {
        if (!items || !items.length) return;

        let index = 0;
        const bannerImg = document.getElementById('hero-banner-image');
        const titleEl = document.getElementById('hero-title');
        const descEl = document.getElementById('hero-description');
        const playBtn = document.getElementById('playButton');

        function showItem(i) {
          const featured = items[i];
          if (!featured) return;

          const backdrop = FLM.JF.backdropUrl(featured) || FLM.JF.posterUrl(featured);
          bannerImg.src = backdrop || '/assets/images/ZainaShowTheaterBanner.jpg';
          titleEl.textContent = featured.Name || 'Untitled';
          descEl.textContent = featured.Overview || 'No description available.';
          playBtn.href = `${FLM.JF.cfg.url}/web/index.html#!/details?id=${featured.Id}`;
        }

        // Initial slide
        showItem(index);

        // Cycle every 10 seconds
        setInterval(() => {
          index = (index + 1) % items.length;
          showItem(index);
        }, 10000);
      })
      .catch(err => console.warn('Hero slideshow failed:', err));
  }
});
</script>

<!-- üî¥ START FLM A2: Latest Releases injector (no layout changes) -->
<script>
document.addEventListener('DOMContentLoaded', async () => {
  try {
    const headings = Array.from(document.querySelectorAll('h2,h3'));
    const latestHead = headings.find(h => /\blatest releases\b/i.test(h.textContent) || /\bnew releases\b/i.test(h.textContent));
    if (!latestHead) return;
    const section = latestHead.closest('.movie-carousel-section') || latestHead.parentElement;
    let rail = section && section.querySelector('.movie-card-carousel');
    if (!rail) {
      rail = document.getElementById('latest-releases-grid') || section?.nextElementSibling || null;
    }
    if (!rail) return;
    if (!window.FLM || !FLM.JF) return;
    const items = await FLM.JF.latest({ limit: 24, types: 'Movie,Series', sortBy: 'DateAdded' });
    rail.innerHTML = items.map(it => {
      const img = FLM.JF.posterUrl(it) || '';
      const name = it.Name || '';
      const href = `${FLM.JF.cfg.url}/web/index.html#!/details?id=${it.Id}`;
      const rating = (it.OfficialRating || 'NR').toUpperCase();
      const genres = (it.Genres || []).join(',');
      return `
        <div class="movie-card" data-id="${it.Id}" data-rating="${rating}" data-genres="${genres}" style="cursor:pointer">
          <a href="${href}" target="_blank" rel="noopener">
            <img class="movie-poster" src="${img}" alt="${name}">
          </a>
          <div class="movie-title">${name}</div>
        </div>
      `;
    }).join('');
  } catch (e) {
    console.warn('Latest Releases injector failed:', e);
  }
});
</script>
<!-- üü¢ END FLM A2: Latest Releases injector -->
<script id="flm-jf-config">
// üîß FLM JF CONFIG PATCH ‚Äî sets new API key (safe to change later)
(function(){
  var NEW_KEY = "ba35f10531804c839b6b2be89048b414";
  if (window.FLM && FLM.JF && FLM.JF.cfg) {
    FLM.JF.cfg.key = NEW_KEY;
  }
  window.FLM_JF_CONFIG = Object.assign(window.FLM_JF_CONFIG || {}, { key: NEW_KEY });
})();
</script>

<script type="module" src="js/app.js"></script>
<script>
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const body = document.body;
  const zainaBtn = document.getElementById('floatingZainaAiButton');
  const chatBtn = document.getElementById('floatingChatButton');
  const zainaPanel = document.getElementById('zainaAiPanel');
  const chatPanel = document.getElementById('chatPanel');

  function closePanel(panel) {
    panel.classList.remove('open');
    body.classList.remove('panel-active');
  }

  function togglePanel(panel) {
    const isOpen = panel.classList.contains('open');
    closePanel(zainaPanel);
    closePanel(chatPanel);
    if (!isOpen) {
      panel.classList.add('open');
      body.classList.add('panel-active');
    }
  }

  zainaBtn.addEventListener('click', () => togglePanel(zainaPanel));
  chatBtn.addEventListener('click', () => togglePanel(chatPanel));
});
</script>
<section>

<!-- Continue Watching Section -->
<section>
  <h2>‚èØ Continue Watching</h2>
  <div id="continue-watching-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üé¨ Movies</h2>
  <div id="movies-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üì∫ Awesome TV Shows</h2>
  <div id="awesome-tv-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üåè Asian Cinema</h2>
  <div id="asian-cinema-grid" class="movie-grid"></div>
</section>

<section>
  <h2>‚ú® Beyond Reality</h2>
  <div id="beyond-reality-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üéûÔ∏è Classic TV Shows</h2>
  <div id="classic-tv-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üìö Collections</h2>
  <div id="collections-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üòÇ Comedy</h2>
  <div id="comedy-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üì∞ FLM News Filipina</h2>
  <div id="flm-news-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üé• Independent Films</h2>
  <div id="independent-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üéÆ Gaming</h2>
  <div id="gaming-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üèÜ Golden Classics</h2>
  <div id="golden-classics-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üá™üá∏ In Spanish TV</h2>
  <div id="in-spanish-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üåç International Films</h2>
  <div id="international-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üë∂ Kids World</h2>
  <div id="kids-world-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üé§ Live Events</h2>
  <div id="live-events-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üåô Midnight Circuit</h2>
  <div id="midnight-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üéôÔ∏è Talk</h2>
  <div id="talk-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üßë‚Äçü§ù‚Äçüßë Teens</h2>
  <div id="teens-grid" class="movie-grid"></div>
</section>

<section>
  <h2>üåÄ Zaina Zone</h2>
  <div id="zaina-zone-grid" class="movie-grid"></div>
</section>
<footer style="background-color: #111; padding: 1rem; text-align: center; color: #ccc; font-size: 0.85rem; margin-top: 2rem;">
  ¬© 2025 <strong>FLM TV</strong>. All rights reserved. Powered by Zaina Juliette, ZJ Spotlight Productions, FLM TV. ‚ú®
</footer>
<script src="app.js"></script>

</body>
</html>
